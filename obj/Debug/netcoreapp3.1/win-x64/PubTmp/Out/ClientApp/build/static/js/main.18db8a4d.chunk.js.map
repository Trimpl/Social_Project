{"version":3,"sources":["components/api-authorization/ApiAuthorizationConstants.ts","components/api-authorization/AuthorizeService.ts","store/api-auth/LoginForm.tsx","store/Profile/ProfileStore.tsx","store/Profile/EditProfileStore.ts","store/Friends/FriendsStore.ts","store/Dialogs/DialogStore.ts","store/Posts/PostsStore.ts","store/PhotoAlbum/PhotoAlbumStore.ts","store/Groups/GroupStore.ts","store/Notifications/Notifications.ts","store/MessageNotifications/MesNotifcationsStore.ts","store/index.ts","store/signalr/signal.ts","components/MessageNotifications/MesNotifications.tsx","components/Notifications/Notifications.tsx","components/api-authorization/LoginMenu.tsx","components/NavMenu.tsx","components/Layout.tsx","components/Comments/CreateComment.tsx","components/Comments/ListOfComments.tsx","components/Images/Image.tsx","components/Posts/LikeBtn.tsx","components/Posts/ListOfPosts.tsx","components/Home.tsx","components/api-authorization/AuthorizeRoute.tsx","components/api-authorization/Login.tsx","components/api-authorization/Logout.tsx","components/api-authorization/ApiAuthorizationRoutes.tsx","components/api-auth/LoginForm.tsx","components/NotFound.tsx","components/api-auth/RegisterForm.tsx","components/api-auth/ConfirmEmail.tsx","components/Profile/FileInput.tsx","components/Posts/CreatePost.tsx","components/PhotoAlbum/PhotoAlbum.tsx","components/Profile/ListOfSubs.tsx","components/Profile/Profile.tsx","components/Profile/EditProfile.tsx","components/Friends/PanelOfFriend.tsx","components/Friends/Friends.tsx","components/Chat/Dialog.tsx","components/Chat/Dialogs.tsx","components/Groups/CreateGroup.tsx","components/Groups/ListOfSubscribers.tsx","components/Groups/Subscribe.tsx","components/Groups/GetGroup.tsx","components/Groups/ListOfGroups.tsx","index.tsx","store/configureStore.ts","App.tsx"],"names":["QueryParameterNames","LogoutActions","LoginActions","prefix","ApplicationPaths","DefaultLoginRedirectPath","ApiAuthorizationClientConfigurationUrl","ApiAuthorizationPrefix","Login","LoginFailed","LoginCallback","Register","Profile","LogOut","LoggedOut","LogOutCallback","IdentityRegisterPath","IdentityManagePath","authService","userManager","_callbacks","_nextSubscriptionId","_user","_isAuthenticated","_popUpDisabled","this","getUser","user","profile","ensureUserManagerInitialized","access_token","state","console","log","signinSilent","createArguments","silentUser","updateState","success","Error","signinPopup","undefined","popUpUser","message","error","redirect","url","signinCallback","signoutPopup","signoutRedirect","signoutCallback","response","data","notifySubscribers","callback","push","subscription","subscriptionId","subscriptionIndex","map","element","index","found","filter","length","splice","i","useReplaceToNavigate","status","AuthenticationResultStatus","Fail","Success","Redirect","fetch","ok","json","settings","automaticSilentRenew","includeIdTokenInSilentRenew","userStore","WebStorageStateStore","UserManager","events","addUserSignedOut","a","removeUser","actionCreators","request","Email","Password","RememberMe","Controller","dispatch","getState","appState","formData","FormData","append","toString","loginForm","type","method","body","then","receive","relocate","signIn","returnUrl","window","location","replace","catch","unloadedState","isLoading","requestProfile","userId","getAccessToken","token","headers","requestFriends","id","listOfFriends","getEditProfile","postEditProfile","firstName","secondName","country","city","languages","dateOfBirth","familyStatus","avatar","Date","isAuthor","listOfNotFriends","requestNotFriends","requestDialog","toUserId","sub","messages","withWhomId","sendMessage","Promise","all","to","recieveMessage","dialog","sendPost","postText","pictureLink","groupId","requestPosts","posts","group","isAuthenticated","valueOf","getLike","postId","likes","sendLike","sendComment","text","recievedSuccess","requestAlbum","pictures","addToAlbum","JSON","stringify","albumId","object","getGroup","isAdmin","getListOfSubscribers","users","admins","name","description","avatarLink","notifications","removeNotifications","ids","deleteNotification","setTimeout","reducers","incomingAction","action","className","role","editProfile","friends","firstId","secondId","createPost","newLike","countsOfLikes","isLiked","newComment","comments","post","photoAlbum","notification","mesNotifications","pathname","includes","connection","signalR","withUrl","accessTokenFactory","getToken","configureLogging","None","build","signalRRegisterCommands","store","start","on","document","getElementById","textContent","innerHTML","onclose","ping","next","invoke","MesNotifications","props","key","src","alt","width","height","firstUserId","React","connect","MesNotificationsStore","Notifications","count","ensureDataFetched","setState","data-toggle","aria-haspopup","aria-expanded","onClick","remove","icon","faBell","aria-labelledby","b","image","NotificationStore","LoginMenu","_subscription","userName","subscribe","populateState","unsubscribe","profilePath","logoutPath","local","authenticatedView","registerPath","loginPath","anonymousView","NavItem","NavLink","tag","Link","faNewspaper","faUsers","faCommentAlt","faComments","faUser","faSignOutAlt","Component","NavMenu","isOpen","toggle","Navbar","Container","NavbarBrand","NavbarToggler","Collapse","navbar","style","marginTop","children","CreateComment","commentText","handleInputChange","bind","event","target","value","placeholder","required","onChange","renderCreatePost","ListOfComments","elementClass","showAll","date","postDate","createDate","toLocaleDateString","toLocaleTimeString","link","renderText","Img","background","closeModalPicture","renderModalPicture","LikeBtn","e","checked","change","htmlFor","viewBox","xmlns","fill","fillRule","transform","d","opacity","cx","cy","r","ListOfPosts","picture","renderPosts","CreatePostStore","Home","AuthorizeRoute","ready","authenticated","authenticationChanged","populateAuthenticationState","createElement","href","path","protocol","host","search","hash","component","rest","render","login","getReturnUrl","processLoginCallback","URLSearchParams","get","redirectToProfile","redirectToRegister","result","navigateToReturnUrl","completeSignIn","fromQuery","startsWith","origin","redirectToApiAuthorizationPath","encodeURI","apiAuthorizationPath","redirectUrl","Logout","isReady","history","logout","processLogoutCallback","signOut","completeSignOut","ApiAuthorizationRoutes","loginAction","logoutAction","LoginForm","handleSubmit","preventDefault","handleChangeEmail","handleChangePassword","PureComponent","LoginFormState","NotFound","RegisterForm","ConfirmPassword","handleChangeConfirmPassword","ConfirmEmailSuccess","BadConfirmEmail","FileInput","fileInput","onImageChange","upload","current","files","file","match","fd","xhr","XMLHttpRequest","open","setRequestHeader","that","onload","parse","responseText","$","empty","send","ref","faFileImage","renderInput","CreatePost","handleInputFileChange","prevState","PhotoAlbum","pictureLinks","renderAlbum","renderStateAlbum","PhotoAlbumStore","ListOfFriends","listOfFrfiends","params","toUTCString","renderUser","ProfileStore","EditProfile","values","getDate","getMonth","pattern","getFullYear","EditProfileStore","PanelOfFriend","isFriend","addDeleteFriend","friend","renderButton","Friends","renderListOfFriends","renderListOfNotFriends","FriendsStore","Dialog","componentDidMount","scrollTo","querySelector","scrollHeight","onLoad","bg","isViewed","DialogStore","Dialogs","dialogs","renderDialogs","CreateGroupe","editGroup","renderForm","GroupStore","ListOfSubscribers","renderMakeAdminBtn","renderAdminList","renderUserList","Subscribe","subscribed","GetGroup","renderAuthView","renderAdminView","renderGroup","ListOfGroups","subGroups","notSubGroups","listOfSubGroups","listOfNotSubGroups","renderGroups","baseUrl","getElementsByTagName","getAttribute","createBrowserHistory","basename","initialState","middleware","thunk","routerMiddleware","rootReducer","combineReducers","router","connectRouter","enhancers","windowIfDefined","__REDUX_DEVTOOLS_EXTENSION__","createStore","compose","applyMiddleware","configureStore","auth","ReactDOM","Layout","exact","CreateGroup"],"mappings":"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","file":"static/js/main.18db8a4d.chunk.js","sourcesContent":["export const ApplicationName = 'WebApplication1';\n\nexport const QueryParameterNames = {\n  ReturnUrl: 'returnUrl',\n  Message: 'message'\n};\n\nexport const LogoutActions = {\n  LogoutCallback: 'logout-callback',\n  Logout: 'logout',\n  LoggedOut: 'logged-out'\n};\n\nexport const LoginActions = {\n  Login: 'login',\n  LoginCallback: 'login-callback',\n  LoginFailed: 'login-failed',\n  Profile: 'profile',\n  Register: 'register'\n};\n\nconst prefix = '/authentication';\n\nexport const ApplicationPaths = {\n  DefaultLoginRedirectPath: '/',\n  ApiAuthorizationClientConfigurationUrl: `/_configuration/${ApplicationName}`,\n  ApiAuthorizationPrefix: prefix,\n  Login: `${prefix}/${LoginActions.Login}`,\n  LoginFailed: `${prefix}/${LoginActions.LoginFailed}`,\n  LoginCallback: `${prefix}/${LoginActions.LoginCallback}`,\n  Register: `${prefix}/${LoginActions.Register}`,\n  Profile: `${prefix}/${LoginActions.Profile}`,\n  LogOut: `${prefix}/${LogoutActions.Logout}`,\n  LoggedOut: `${prefix}/${LogoutActions.LoggedOut}`,\n  LogOutCallback: `${prefix}/${LogoutActions.LogoutCallback}`,\n  IdentityRegisterPath: '/Identity/Account/Register',\n  IdentityManagePath: '/Identity/Account/Manage'\n};\n","import { UserManager, WebStorageStateStore } from 'oidc-client';\nimport { ApplicationPaths, ApplicationName } from './ApiAuthorizationConstants';\n\nexport class AuthorizeService {\n    userManager!: UserManager;\n    _callbacks: any = [];\n    _nextSubscriptionId = 0;\n    _user: any = null;\n    _isAuthenticated = false;\n\n    // By default pop ups are disabled because they don't work properly on Edge.\n    // If you want to enable pop up authentication simply set this flag to false.\n    _popUpDisabled = true;\n\n    async isAuthenticated() {\n        const user = await this.getUser();\n        return !!user;\n    }\n\n    async getUser() {\n        if (this._user && this._user.profile) {\n            return this._user.profile;\n        }\n\n        await this.ensureUserManagerInitialized();\n        const user = await this.userManager.getUser();\n        return user && user.profile;\n    }\n\n    async getAccessToken() {\n        await this.ensureUserManagerInitialized();\n        const user = await this.userManager.getUser();\n        return user && user.access_token;\n    }\n\n    async signIn(state: any) {\n        await this.ensureUserManagerInitialized();\n        try {\n            console.log('ТИХАЯ АВТОРИЗАЦИЯ1')\n            const silentUser = await this.userManager.signinSilent(this.createArguments(null));\n            console.log('ТИХАЯ АВТОРИЗАЦИЯ2')\n            this.updateState(silentUser);\n            console.log('ТИХАЯ АВТОРИЗАЦИЯ3')\n            return this.success(state);\n        } catch (silentError) {\n            console.log('asd')\n            // User might not be authenticated, fallback to popup authentication\n            try {\n                if (this._popUpDisabled) {\n                    throw new Error('Popup disabled. Change \\'AuthorizeService.js:AuthorizeService._popupDisabled\\' to false to enable it.')\n                }\n                console.log(silentError)\n                const popUpUser = await this.userManager.signinPopup(this.createArguments(undefined));\n                this.updateState(popUpUser);\n                return this.success(state);\n            } catch (popUpError) {\n                if (popUpError.message === \"Popup window closed\") {\n                    // The user explicitly cancelled the login action by closing an opened popup.\n                    return this.error(\"The user closed the window.\");\n                } else if (!this._popUpDisabled) {\n                    console.log(\"Popup authentication error: \", popUpError);\n                }\n\n                // PopUps might be blocked by the user, fallback to redirect\n                try {\n                    //await this.userManager.signinRedirect(this.createArguments(state));\n                    return this.redirect();\n                } catch (redirectError) {\n                    console.log(\"Redirect authentication error: \", redirectError);\n                    return this.error(redirectError);\n                }\n            }\n        }\n    }\n\n    async completeSignIn(url: string) {\n        try {\n            await this.ensureUserManagerInitialized();\n            const user = await this.userManager.signinCallback(url);\n            this.updateState(user);\n            return this.success(user && user.state);\n        } catch (error) {\n            console.log('There was an error signing in: ', error);\n            return this.error('There was an error signing in.');\n        }\n    }\n\n    // We try to sign out the user in two different ways:\n    // 1) We try to do a sign-out using a PopUp Window. This might fail if there is a\n    //    Pop-Up blocker or the user has disabled PopUps.\n    // 2) If the method above fails, we redirect the browser to the IdP to perform a traditional\n    //    post logout redirect flow.\n    async signOut(state: any) {\n        await this.ensureUserManagerInitialized();\n        try {\n            if (this._popUpDisabled) {\n                throw new Error('Popup disabled. Change \\'AuthorizeService.js:AuthorizeService._popupDisabled\\' to false to enable it.')\n            }\n            await this.userManager.signoutPopup(this.createArguments(undefined));\n            this.updateState(undefined);\n            return this.success(state);\n        } catch (popupSignOutError) {\n            console.log(\"Popup signout error: \", popupSignOutError);\n            try {\n                await this.userManager.signoutRedirect(this.createArguments(state));\n                return this.redirect();\n            } catch (redirectSignOutError) {\n                console.log(\"Redirect signout error: \", redirectSignOutError);\n                return this.error(redirectSignOutError);\n            }\n        }\n    }\n\n    async completeSignOut(url: string) {\n        await this.ensureUserManagerInitialized();\n        try {\n            const response = await this.userManager.signoutCallback(url) as any;\n            this.updateState(null);\n            return this.success(response && response.data);\n        } catch (error) {\n            console.log(`There was an error trying to log out '${error}'.`);\n            return this.error(error);\n        }\n    }\n\n    updateState(user: any) {\n        this._user = user;\n        this._isAuthenticated = !!this._user;\n        this.notifySubscribers();\n    }\n\n    subscribe(callback: any) {\n        this._callbacks.push({ callback, subscription: this._nextSubscriptionId++ });\n        return this._nextSubscriptionId - 1;\n    }\n\n    unsubscribe(subscriptionId: any) {\n        const subscriptionIndex = this._callbacks\n            .map((element: { subscription: any; }, index: any) => element.subscription === subscriptionId ? { found: true, index } : { found: false })\n            .filter((element: { found: boolean; }) => element.found === true);\n        if (subscriptionIndex.length !== 1) {\n            throw new Error(`Found an invalid number of subscriptions ${subscriptionIndex.length}`);\n        }\n\n        this._callbacks.splice(subscriptionIndex[0].index, 1);\n    }\n\n    notifySubscribers() {\n        for (let i = 0; i < this._callbacks.length; i++) {\n            const callback = this._callbacks[i].callback;\n            callback();\n        }\n    }\n\n    createArguments(state: any) {\n        return { useReplaceToNavigate: true, data: state };\n    }\n\n    error(message: any) {\n        return { status: AuthenticationResultStatus.Fail, message };\n    }\n\n    success(state: any) {\n        return { status: AuthenticationResultStatus.Success, state };\n    }\n\n    redirect() {\n        return { status: AuthenticationResultStatus.Redirect };\n    }\n\n    async ensureUserManagerInitialized() {\n        if (this.userManager !== undefined) {\n            return;\n        }\n\n        let response = await fetch(ApplicationPaths.ApiAuthorizationClientConfigurationUrl);\n        if (!response.ok) {\n            throw new Error(`Could not load settings for '${ApplicationName}'`);\n        }\n        let settings = await response.json();\n        settings.automaticSilentRenew = true;\n        settings.includeIdTokenInSilentRenew = true;\n        settings.userStore = new WebStorageStateStore({\n            prefix: ApplicationName\n        });\n        this.userManager = new UserManager(settings);\n\n        this.userManager.events.addUserSignedOut(async () => {\n            await this.userManager.removeUser();\n            this.updateState(undefined);\n        });\n    }\n\n    static get instance() { return authService }\n}\n\nconst authService = new AuthorizeService();\n\nexport default authService;\n\nexport const AuthenticationResultStatus = {\n    Redirect: 'redirect',\n    Success: 'success',\n    Fail: 'fail'\n};\n","import { Action, Reducer } from 'redux';\nimport { AppThunkAction } from '..';\nimport authService from '../../components/api-authorization/AuthorizeService';\nimport * as React from 'react';\n\nexport interface LoginFormState {\n    isLoading: JSX.Element;\n    status: string;\n    relocate: boolean\n}\n\nexport interface Form {\n    Email: string,\n    Password: string,\n    RememberMe: boolean\n}\n\ninterface Request {\n    type: 'REQUEST';\n}\n\ninterface Receive {\n    type: 'RECEIVE';\n    receive: string;\n    relocate: boolean\n}\n\ntype KnownAction = Request | Receive;\n\nexport const actionCreators = {\n    request: (Email: string, Password: string, RememberMe: boolean, Controller: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const appState = getState()\n        const formData = new FormData()\n        formData.append('Input.Email', Email)\n        formData.append('Input.Password', Password)\n        formData.append('Input.RememberMe', RememberMe.toString())\n        if (appState && appState.loginForm) {\n            dispatch({ type: 'REQUEST' })\n            fetch(Controller, {\n                method: 'POST',\n                body: formData\n            })\n                .then(async data => {\n                    if (data.ok) {\n                        dispatch({ type: 'RECEIVE', receive: 'You successfully logged in', relocate: true });\n                        const returnUrl = \"https://localhost:5001/\"\n                        await authService.signIn({ returnUrl })\n                        window.location.replace('https://localhost:5001/');\n                    }\n                    else {\n                        dispatch({ type: 'RECEIVE', receive: \"Oops, that's not a match. Try again?\", relocate: false });\n                    }\n                })\n                .catch(data => console.log(data))\n        }\n    }\n};\n\nconst unloadedState: LoginFormState = { isLoading: <div></div>, status: '', relocate: false };\n\nexport const reducer: Reducer<LoginFormState> = (state: LoginFormState | undefined, incomingAction: Action): LoginFormState => {\n    if (state === undefined) {\n        return unloadedState;\n    }\n\n    const action = incomingAction as KnownAction;\n    switch (action.type) {\n        case 'REQUEST':\n            return {\n                status: '',\n                isLoading: <div className=\"spinner-border text-primary\" role=\"status\">\n                    <span className=\"sr-only\">Loading...</span>\n                </div>,\n                relocate: false\n            };\n        case 'RECEIVE':\n            return {\n                status: action.receive,\n                isLoading: <div></div>,\n                relocate: action.relocate\n            }\n        default:\n            return state\n    }\n}","import { Action, Reducer } from 'redux';\nimport { AppThunkAction } from '..';\nimport authService from '../../components/api-authorization/AuthorizeService';\nimport * as React from 'react';\nimport { Friend } from '../Friends/FriendsStore';\n\nexport interface ProfileState {\n    isLoading: JSX.Element\n    user: UserModel | null\n    listOfFriends: Friend[]\n}\nexport interface User {\n    id: string;\n    firstName: string;\n    secondName: string;\n    familyStatus: string;\n    dateOfBirth: Date;\n    country: string;\n    city: string;\n    languages: string;\n    avatar: string\n}\nexport interface UserModel extends User {\n    isAuthor: boolean\n}\ninterface Request {\n    type: 'REQUEST';\n}\ninterface ReceiveFriends {\n    type: 'RECEIVE_LIST_OF_FRIENDS';\n    listOfFriends: Friend[]\n}\ninterface Receive {\n    type: 'RECEIVE';\n    user: UserModel | null\n}\ntype KnownAction = Request | Receive | ReceiveFriends;\n\nexport const actionCreators = {\n    requestProfile: (userId: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const token = await authService.getAccessToken();\n        fetch(`api/Profile?userId=${userId}`, {\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => {\n                return response.ok ? response.json() as Promise<UserModel> : null\n            })\n            .then(data => {\n                dispatch({ type: 'RECEIVE', user: data })\n            });\n        dispatch({ type: 'REQUEST' });\n    },\n    requestFriends: (id: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        dispatch({ type: 'REQUEST' });\n        const token = await authService.getAccessToken();\n        fetch(`api/getFriends?id=${id}`, {\n            method: 'GET',\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => {\n                if (!response.ok) {\n                    return []\n                } else {\n                    return response.json()\n                }\n            })\n            .then(data => {\n                dispatch({ type: 'RECEIVE_LIST_OF_FRIENDS', listOfFriends: data });\n            });\n    },\n};\n\nconst unloadedState: ProfileState = { user: null, isLoading: <div></div>, listOfFriends: [] };\n\nexport const reducer: Reducer<ProfileState> = (\n    state: ProfileState | undefined,\n    incomingAction: Action): ProfileState => {\n    if (state === undefined) {\n        return unloadedState;\n    }\n    const action = incomingAction as KnownAction;\n    switch (action.type) {\n        case 'REQUEST':\n            return {\n                ...state,\n                user: null,\n                isLoading: <div className=\"spinner-border text-primary\" role=\"status\">\n                    <span className=\"sr-only\">Loading...</span>\n                </div>\n            };\n        case 'RECEIVE_LIST_OF_FRIENDS':\n            return {\n                ...state,\n                listOfFriends: action.listOfFriends\n            };\n        case 'RECEIVE':\n            return {\n                ...state,\n                user: action.user,\n                isLoading: <div></div>\n            };\n        default:\n            return state;\n    }\n};\n","import { Action, Reducer } from 'redux';\nimport { AppThunkAction } from '..';\nimport authService from '../../components/api-authorization/AuthorizeService';\nimport { UserModel } from './ProfileStore';\n\nexport interface EditProfileState {\n    isLoading: boolean;\n    user: UserModel;\n    status: string\n}\n\ninterface Request {\n    type: 'REQUEST';\n}\n\ninterface Receive {\n    type: 'RECEIVE';\n    user: UserModel;\n    status: string\n}\n\ntype KnownAction = Request | Receive;\n\nexport const actionCreators = {\n    getEditProfile: (): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const token = await authService.getAccessToken();\n        fetch(`api/EditProfile`, {\n            method: 'GET',\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => response.json() as Promise<UserModel>)\n            .then(data => {\n                dispatch({ type: 'RECEIVE', user: data, status: 'downloaded' });\n            });\n        dispatch({ type: 'REQUEST' });\n    },\n    postEditProfile: (user: UserModel): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const token = await authService.getAccessToken();\n        const formData = new FormData()\n        formData.append('Input.FirstName', user.firstName)\n        formData.append('Input.SecondName', user.secondName)\n        formData.append('Input.Country', user.country)\n        formData.append('Input.City', user.city)\n        formData.append('Input.Languages', user.languages)\n        formData.append('Input.DateOfBirth', user.dateOfBirth.toString())\n        formData.append('Input.FamilyStatus', user.familyStatus)\n        formData.append('Input.Avatar', user.avatar)\n        fetch(`api/EditProfile`, {\n            method: 'POST',\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` },\n            body: formData\n        })\n            .then(response => response.json() as Promise<UserModel>)\n            .then(data => {\n                dispatch({ type: 'RECEIVE', user: data, status: 'ok 200' });\n            });\n        dispatch({ type: 'REQUEST' });\n    }\n};\n\nconst unloadedState: EditProfileState = {\n    user: {\n        id: '',\n        firstName: '',\n        secondName: '',\n        familyStatus: '',\n        dateOfBirth: new Date(),\n        country: '',\n        city: '',\n        languages: '',\n        avatar: '',\n        isAuthor: false\n    },\n    isLoading: false,\n    status: ''\n};\n\nexport const reducer: Reducer<EditProfileState> = (state: EditProfileState | undefined, incomingAction: Action): EditProfileState => {\n    if (state === undefined) {\n        return unloadedState;\n    }\n\n    const action = incomingAction as KnownAction;\n    switch (action.type) {\n        case 'REQUEST':\n            return {\n                user: state.user,\n                isLoading: true,\n                status: ''\n            };\n        case 'RECEIVE':\n            return {\n                isLoading: false,\n                user: action.user,\n                status: action.status\n            };\n            break;\n    }\n    return state;\n};\n","import { Action, Reducer } from 'redux';\nimport { AppThunkAction } from '..';\nimport authService from '../../components/api-authorization/AuthorizeService';\nimport { UserModel } from '../Profile/ProfileStore';\n\nexport interface Friend extends UserModel {\n    id: string\n}\n\nexport interface FriendsState {\n    isLoading: boolean;\n    listOfFriends: Friend[];\n    listOfNotFriends: Friend[];\n}\nconst unloadedState: FriendsState = { isLoading: false, listOfFriends: [], listOfNotFriends: [] };\ninterface Request {\n    type: 'REQUEST';\n}\ninterface ReceiveFriends {\n    type: 'RECEIVE_LIST_OF_FRIENDS';\n    listOfFriends: Friend[]\n}\ninterface ReceiveNotFriends {\n    type: 'RECEIVE_LIST_OF_NOT_FRIENDS';\n    listOfNotFriends: Friend[]\n}\n\ntype KnownAction = Request | ReceiveNotFriends | ReceiveFriends;\n\nexport const actionCreators = {\n    requestFriends: (): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        dispatch({ type: 'REQUEST' });\n        const token = await authService.getAccessToken();\n        fetch(`api/friends`, {\n            method: 'GET',\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => {\n                if (!response.ok) {\n                    return []\n                } else {\n                    return response.json()\n                }\n            })\n            .then(data => {\n                dispatch({ type: 'RECEIVE_LIST_OF_FRIENDS', listOfFriends: data });\n            });\n    },\n    requestNotFriends: (): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        dispatch({ type: 'REQUEST' });\n        const token = await authService.getAccessToken();\n        fetch(`api/friends/notFriends`, {\n            method: 'GET',\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => {\n                if (!response.ok) {\n                    return []\n                } else {\n                    return response.json()\n                }\n            })\n            .then(data => {\n                dispatch({ type: 'RECEIVE_LIST_OF_NOT_FRIENDS', listOfNotFriends: data });\n            });\n    },\n};\n\nexport const reducer: Reducer<FriendsState> = (state: FriendsState | undefined, incomingAction: Action): FriendsState => {\n    if (state === undefined) {\n        return unloadedState;\n    }\n\n    const action = incomingAction as KnownAction;\n    switch (action.type) {\n        case 'REQUEST':\n            return {\n                isLoading: true,\n                listOfNotFriends: state.listOfNotFriends,\n                listOfFriends: state.listOfFriends\n            };\n        case 'RECEIVE_LIST_OF_NOT_FRIENDS':\n            return {\n                isLoading: false,\n                listOfNotFriends: action.listOfNotFriends,\n                listOfFriends: state.listOfFriends\n            };\n        case 'RECEIVE_LIST_OF_FRIENDS':\n            return {\n                isLoading: false,\n                listOfNotFriends: state.listOfNotFriends,\n                listOfFriends: action.listOfFriends\n            };\n        default:\n            return state;\n    }\n};\n","import { Action, Reducer } from 'redux';\nimport { AppThunkAction } from '..';\nimport authService from '../../components/api-authorization/AuthorizeService';\n\nexport interface DialogState {\n    isLoading: boolean\n    withWhomId: string\n    dialog: Message[]\n}\nexport interface Message {\n    id: string\n    firstUserId: string\n    secondUserId: string\n    message: string\n    createDate: Date\n    avatar: string\n    firstId: string\n    secondId: string\n    withWhomId: string\n    isViewed: boolean\n}\ninterface Request {\n    type: 'REQUEST';\n}\ninterface AddMessageRequest {\n    type: 'ADD_MESSAGE'\n    user: string\n    message: string\n    to: string\n}\ninterface RecieveMessage {\n    type: 'MESSAGE_RECEIVED'\n    message: Message\n}\ninterface RecieveMessageView {\n    type: 'MESSAGE_RECEIVED_VIEW'\n    message: Message\n}\ninterface GET_NUMBER_OF_UNREAD_DIALOGS {\n    type: 'GET_NUMBER_OF_UNREAD_DIALOGS'\n    id: string\n}\nexport interface ReceiveDialog {\n    type: 'RECEIVE_DIALOG'\n    messages: Message[]\n    withWhomId: string\n}\n\ntype KnownAction = Request | ReceiveDialog | AddMessageRequest | RecieveMessage | RecieveMessageView | GET_NUMBER_OF_UNREAD_DIALOGS\n\nexport const actionCreators = {\n    requestDialog: (toUserId: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const token = await authService.getAccessToken()\n        const user = await authService.getUser()\n        fetch(`api/Dialog?toUserId=${toUserId}`, {\n            method: 'GET',\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => {\n                return response.ok ? response.json() as Promise<Message[]> : []\n            })\n            .then(data => {\n                dispatch({ type: 'GET_NUMBER_OF_UNREAD_DIALOGS', id: user.sub})\n                dispatch({ type: 'RECEIVE_DIALOG', messages: data, withWhomId: toUserId });\n            });\n\n        dispatch({ type: 'REQUEST', });\n    },\n    sendMessage: (toUserId: string, message: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const [user] = await Promise.all([authService.getUser()])\n        dispatch({ type: 'ADD_MESSAGE', user: user.Email, message: message, to: toUserId });\n    },\n    recieveMessage: (message: Message): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        console.log('MESSAGE_RECEIVED_VIEW')\n        dispatch({ type: 'MESSAGE_RECEIVED_VIEW', message: message})\n    },\n};\n\nconst unloadedState: DialogState = { isLoading: false, dialog: [], withWhomId: '' };\n\nexport const reducer: Reducer<DialogState> =\n    (state: DialogState | undefined, incomingAction: Action): DialogState => {\n        if (state === undefined) {\n            return unloadedState;\n        }\n        const action = incomingAction as KnownAction;\n        switch (action.type) {\n            case 'REQUEST':\n                return {\n                    ...state,\n                    isLoading: true,\n                    dialog: state.dialog\n                };\n            case 'MESSAGE_RECEIVED':\n                if (action.message.firstId == state.withWhomId || action.message.secondId == state.withWhomId) {\n                    if (action.message.firstId == state.withWhomId) {\n                        \n                    }\n                    return {\n                        ...state,\n                        dialog: [...state.dialog, action.message]\n                    }\n                }\n                return {\n                    ...state\n                }\n            case 'RECEIVE_DIALOG':\n                return {\n                    ...state,\n                    isLoading: false,\n                    dialog: action.messages,\n                    withWhomId: action.withWhomId\n                };\n                break;\n        }\n        return state;\n    };\n","import { Action, Reducer } from 'redux';\nimport { AppThunkAction } from '..';\nimport authService from '../../components/api-authorization/AuthorizeService';\nimport { UserModel } from '../Profile/ProfileStore';\nimport { Group } from '../Groups/GroupStore';\nimport { Comment } from '../../components/Comments/ListOfComments';\n\nexport interface PostsState {\n    recievedSuccess: boolean\n    posts: Post[]\n    user: UserModel | null\n    group: Group | null\n}\nexport interface Like {\n    id: string\n    userId: string\n    postId: string\n}\nexport interface Picture {\n    id: string\n    pictureLink: string\n}\nexport interface Post {\n    id: string\n    userId: string\n    postText: string\n    createDate: Date\n    pictureLink: Picture[]\n    likes: number\n    isLiked: boolean\n    comments: Comment[]\n    avatar: string\n    link: string\n}\ninterface CREATE_POST_REQUEST {\n    type: 'CREATE_POST_REQUEST';\n}\ninterface CREATE_POST_RECEIVE_OK {\n    type: 'CREATE_POST_RECEIVE_OK'\n    post: Post\n}\ninterface CREATE_POST_RECEIVE_BAD {\n    type: 'CREATE_POST_RECEIVE_BAD';\n}\ninterface RECIEVE_POSTS_OK {\n    type: 'RECIEVE_POSTS_OK';\n    posts: Post[]\n    user: UserModel | null\n}\ninterface RECIEVE_LIKES_OK {\n    type: 'RECIEVE_LIKES_OK';\n    likes: Like[]\n}\ninterface COMMENT_RECEIVED {\n    type: 'COMMENT_RECEIVED'\n    newComment: Comment\n}\ninterface LIKE_RECEIVED {\n    type: 'LIKE_RECEIVED'\n    newLike: {\n        countsOfLikes: number\n        postId: string\n        isLiked: boolean\n        userId: string\n    }\n    user: any\n}\ninterface SEND_LIKE {\n    type: 'SEND_LIKE'\n    userId: string\n    postId: string\n}\ninterface SEND_COMMENT {\n    type: 'SEND_COMMENT'\n    userId: string\n    postId: string\n    text: string\n}\ninterface RECIEVE_POSTS_GROUP_OK {\n    type: 'RECIEVE_POSTS_GROUP_OK'\n    posts: Post[]\n    group: Group | null\n}\ninterface RECIEVE_POSTS_BAD {\n    type: 'RECIEVE_POSTS_BAD'\n}\ninterface CREATE_POST {\n    type: 'CREATE_POST'\n    postText: string\n    pictureLink: string[] | undefined\n    groupId: string | undefined\n    userId: string\n}\n\ntype KnownAction = CREATE_POST | COMMENT_RECEIVED | SEND_COMMENT | SEND_LIKE | RECIEVE_LIKES_OK | LIKE_RECEIVED | RECIEVE_POSTS_GROUP_OK | CREATE_POST_REQUEST | CREATE_POST_RECEIVE_OK | CREATE_POST_RECEIVE_BAD | RECIEVE_POSTS_OK | RECIEVE_POSTS_BAD;\n\nexport const actionCreators = {\n    sendPost: (postText: string, pictureLink?: string[], groupId?: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const token = await authService.getAccessToken();\n        const [user] = await Promise.all([authService.getUser()])\n        dispatch({ type: 'CREATE_POST', postText: postText, userId: user.sub, groupId: groupId, pictureLink: pictureLink })\n    },\n    requestPosts: (method: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const appState = getState();\n        const token = await authService.getAccessToken();\n        if (method === 'Profile') {\n            if (appState.profile && appState.profile.user) {\n                fetch(`api/getPosts?userId=${appState.profile.user.id}`, {\n                    method: 'GET',\n                    headers: !token ? {} : {\n                        'Authorization': `Bearer ${token}`\n                    },\n                })\n                    .then(response => {\n                        return response.ok\n                            ? response.json()\n                            : []\n                    })\n                    .then(data => {\n                        dispatch({ type: 'RECIEVE_POSTS_OK', posts: data, user: appState.profile!.user })\n                    })\n            }\n        }\n        else if (method === 'Group') {\n            if (appState.group && appState.group.group.id) {\n                fetch(`api/getPosts?userId=${appState.group.group.id}`, {\n                    method: 'GET',\n                    headers: !token ? {} : {\n                        'Authorization': `Bearer ${token}`\n                    },\n                })\n                    .then(response => {\n                        return response.ok\n                            ? response.json()\n                            : []\n                    })\n                    .then(data => {\n                        dispatch({ type: 'RECIEVE_POSTS_GROUP_OK', posts: data, group: appState.group!.group })\n                    })\n            }\n        } else if (method === 'News') {\n            const isAuthenticated = await authService.isAuthenticated()\n            if (isAuthenticated.valueOf()) {\n                fetch(`api/getNewsPosts`, {\n                    method: 'GET',\n                    headers: !token ? {} : {\n                        'Authorization': `Bearer ${token}`\n                    },\n                })\n                    .then(response => {\n                        return response.ok\n                            ? response.json()\n                            : []\n                    })\n                    .then(data => {\n                        dispatch({ type: 'RECIEVE_POSTS_OK', posts: data, user: appState.profile!.user })\n                    })\n            }\n        }\n    },\n    getLike: (postId: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        fetch(`api/getLike?postId=${postId}`, {\n            method: 'GET',\n        })\n            .then(response => {\n                return (response.json() as Promise<Like[]>)\n            })\n            .then(data => dispatch({ type: 'RECIEVE_LIKES_OK', likes: data }))\n        dispatch({ type: 'CREATE_POST_REQUEST' })\n    },\n    sendLike: (postId: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        let user = await authService.getUser()\n        dispatch({ type: 'SEND_LIKE', userId: user.sub, postId: postId })\n    },\n    sendComment: (postId: string, text: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        let user = await authService.getUser()\n        dispatch({ type: 'SEND_COMMENT', userId: user.sub, postId: postId, text: text })\n    },\n};\n\nconst unloadedState: PostsState = { recievedSuccess: false, posts: [], user: null, group: null };\n\nexport const reducer: Reducer<PostsState> = (state: PostsState | undefined, incomingAction: Action): PostsState => {\n    if (state === undefined) {\n        return unloadedState;\n    }\n\n    const action = incomingAction as KnownAction;\n    switch (action.type) {\n        case 'LIKE_RECEIVED':\n            return {\n                ...state,\n                posts: state.posts.map((data) => {\n                    if (data.id === action.newLike.postId) {\n                        data.likes = action.newLike.countsOfLikes\n                        if (action.user.sub === action.newLike.userId)\n                            data.isLiked = action.newLike.isLiked\n                    }\n                    return data\n                })\n            }\n        case 'RECIEVE_POSTS_OK':\n            return {\n                ...state,\n                user: action.user,\n                posts: action.posts,\n            };\n        case 'COMMENT_RECEIVED':\n            return {\n                ...state,\n                posts: state.posts.map((data) => {\n                    if (data.id === action.newComment.postId) {\n                        data.comments = [...data.comments, action.newComment]\n                    }\n                    return data\n                })\n            };\n        case 'RECIEVE_POSTS_GROUP_OK':\n            return {\n                ...state,\n                group: action.group,\n                posts: action.posts,\n            };\n        case 'RECIEVE_POSTS_BAD':\n            return {\n                ...state\n            };\n        case 'CREATE_POST_REQUEST':\n            return {\n                ...state,\n                recievedSuccess: false\n            };\n        case 'CREATE_POST_RECEIVE_OK':\n            return {\n                ...state,\n                posts: [action.post, ...state.posts],\n                recievedSuccess: true\n            };\n        case 'CREATE_POST_RECEIVE_BAD':\n            return {\n                ...state,\n                recievedSuccess: false\n            };\n    }\n    return state;\n};\n","import { Action, Reducer } from 'redux';\nimport { AppThunkAction } from '..';\nimport authService from '../../components/api-authorization/AuthorizeService';\n\nexport interface PhotoAlbumSate {\n    isLoading: boolean\n    pictures: Picture[]\n    isAuthor: boolean\n}\nexport interface Picture {\n    id: string\n    postId: string\n    userId: string\n    pictureLink: string\n}\ninterface REQUEST_ALBUM {\n    type: 'REQUEST_ALBUM';\n}\ninterface RECEIVE_ALBUM {\n    type: 'RECEIVE_ALBUM'\n    pictures: Picture[]\n    isAuthor: boolean\n}\n\ntype KnownAction = REQUEST_ALBUM | RECEIVE_ALBUM;\n\nexport const actionCreators = {\n    requestAlbum: (): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const appState = getState();\n        if (appState && appState.profile && appState.profile.user) {\n            const token = await authService.getAccessToken();\n            fetch(`api/getAlbum?albumId=${appState.profile.user!.id}`, {\n                method: 'GET',\n                headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n            })\n                .then(response => response.json() as Promise<any>)\n                .then(data => {\n                    dispatch({ type: 'RECEIVE_ALBUM', pictures: data, isAuthor: appState.profile!.user!.isAuthor });\n                });\n        }\n        dispatch({ type: 'REQUEST_ALBUM', });\n    },\n    addToAlbum: (pictures: string[]): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const appState = getState()\n        if (appState && appState.profile && appState.profile.user) {\n            const token = await authService.getAccessToken();\n            fetch(`api/addPicture`, {\n                method: 'POST',\n                headers: !token ? {} : { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' },\n                body: JSON.stringify({albumId: appState.profile.user.id, pictures: pictures})\n            })\n                .then(response => response.json() as Promise<any>)\n                .then(data => {\n                    dispatch({ type: 'RECEIVE_ALBUM', pictures: data, isAuthor: appState.profile!.user!.isAuthor });\n                });\n\n            dispatch({ type: 'REQUEST_ALBUM', });\n        }\n    }\n};\n\nconst unloadedState: PhotoAlbumSate = { isLoading: false, pictures: [], isAuthor: false };\n\nexport const reducer: Reducer<PhotoAlbumSate> = (state: PhotoAlbumSate | undefined, incomingAction: Action): PhotoAlbumSate => {\n    if (state === undefined) {\n        return unloadedState;\n    }\n\n    const action = incomingAction as KnownAction;\n    switch (action.type) {\n        case 'REQUEST_ALBUM':\n            return {\n                ...state,\n                isLoading: true\n            };\n        case 'RECEIVE_ALBUM':\n            return {\n                ...state,\n                pictures: action.pictures,\n                isLoading: false,\n                isAuthor: action.isAuthor\n            };\n            break;\n    }\n    return state;\n};\n","import { Action, Reducer } from 'redux';\nimport { AppThunkAction } from '..';\nimport authService from '../../components/api-authorization/AuthorizeService';\nimport { User } from '../Profile/ProfileStore';\n\nexport interface GroupState {\n    isLoading: boolean\n    isAuthor: boolean\n    isAdmin: boolean\n    group: Group\n    users: User[]\n    admins: User[]\n}\nexport interface Group {\n    id: string\n    userId: string\n    name: string\n    description: string\n    avatarLink: string\n}\n\ninterface REQUEST {\n    type: 'REQUEST'\n}\ninterface RECEIVE {\n    type: 'RECEIVE'\n}\ninterface GET_GROUP {\n    type: 'GET_GROUP'\n    group: Group\n    isAuthor: boolean\n    isAdmin: boolean\n}\ninterface GET_LIST_OF_SUBSCRIBERS {\n    type: 'GET_LIST_OF_SUBSCRIBERS'\n    users: any\n    admins: any\n}\ninterface SMTH_WENT_WRONG {\n    type: 'SMTH_WENT_WRONG'\n}\nexport interface createGroup {\n    avatarLink: string,\n    name: string,\n    description: string\n}\nexport interface editGroup {\n    id: string,\n    avatarLink: string,\n    name: string,\n    description: string\n}\nexport interface deleteGroup {\n    id: string\n}\nexport interface ChangeGroupAdmin {\n    groupId: string,\n    userId: string\n}\ntype KnownObject = createGroup | editGroup | deleteGroup | ChangeGroupAdmin\ntype KnownAction = SMTH_WENT_WRONG | RECEIVE | REQUEST | GET_GROUP | GET_LIST_OF_SUBSCRIBERS\n\nexport const actionCreators = {\n    request: (object: KnownObject, method: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const token = await authService.getAccessToken();\n        fetch(`api/${method}`, {\n            method: 'POST',\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json', },\n            body: JSON.stringify(object)\n        })\n            .then(response => {\n                response.ok ? dispatch({ type: 'RECEIVE' }) : dispatch({ type: 'SMTH_WENT_WRONG' })\n            })\n\n        dispatch({ type: 'REQUEST' });\n    },\n    getGroup: (id: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const token = await authService.getAccessToken();\n        fetch(`api/groupInfo?id=${id}`, {\n            method: 'GET',\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => {\n                return (\n                    response.json()\n                )\n            })\n            .then(data => {\n                dispatch({ type: 'GET_GROUP', group: data.group, isAuthor: data.isAuthor, isAdmin: data.isAdmin })\n            })\n\n        dispatch({ type: 'REQUEST' });\n    },\n    getListOfSubscribers: (id: string): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const appState = getState()\n        if (appState && appState.group && appState.group.group) {\n            fetch(`api/getListOfSubscribers?groupId=${appState.group.group.id}`, {\n                method: 'GET'\n            })\n                .then(response => {\n                    return (\n                        response.json()\n                    )\n                })\n                .then(data => {\n                    dispatch({ type: 'GET_LIST_OF_SUBSCRIBERS', users: data.users, admins: data.admins })\n                })\n\n            dispatch({ type: 'REQUEST' });\n        }\n    },\n};\n\nconst unloadedState: GroupState = {\n    isLoading: false, group: {\n        id: '', userId: '', name: '', description: '', avatarLink: ''\n    }, isAuthor: false, isAdmin: false, users: [], admins: []\n};\n\nexport const reducer: Reducer<GroupState> = (state: GroupState | undefined, incomingAction: Action): GroupState => {\n    if (state === undefined) {\n        return unloadedState;\n    }\n\n    const action = incomingAction as KnownAction;\n    switch (action.type) {\n        case 'GET_GROUP':\n            return {\n                ...state,\n                isAuthor: action.isAuthor,\n                group: action.group,\n                isLoading: false,\n                isAdmin: action.isAdmin\n            };\n        case 'GET_LIST_OF_SUBSCRIBERS':\n            return {\n                ...state,\n                admins: action.admins,\n                users: action.users\n            };\n        case 'SMTH_WENT_WRONG':\n            return {\n                ...state,\n                isLoading: false\n            };\n        case 'REQUEST':\n            return {\n                ...state,\n                isLoading: true\n            };\n        case 'RECEIVE':\n            return {\n                ...state,\n                isLoading: false\n            };\n            break;\n    }\n    return state;\n};\n","import { Action, Reducer } from 'redux';\nimport { AppThunkAction } from '..';\nimport authService from '../../components/api-authorization/AuthorizeService';\n\nexport interface NotificationsState {\n    isLoading: boolean\n    notifications: Notification[]\n}\n\ninterface Notification {\n    id: string\n    text: string\n    link: string\n    userId: string\n    isViewed: boolean\n    createDate: Date\n    image: string\n}\ninterface REQUEST_NOTIFICATIONS {\n    type: 'REQUEST_NOTIFICATIONS'\n}\ninterface RECEIVE_NOTIFICATIONS {\n    type: 'RECEIVE_NOTIFICATIONS'\n    notifications: Notification[]\n}\ninterface NOTIFICATION_RECIEVED {\n    type: 'NOTIFICATION_RECIEVED'\n    notification: Notification\n}\ninterface REMOVE_NOTIFICATIONS {\n    type: 'REMOVE_NOTIFICATIONS'\n    ids: string[]\n}\n\ntype KnownAction = REQUEST_NOTIFICATIONS | RECEIVE_NOTIFICATIONS | NOTIFICATION_RECIEVED | REMOVE_NOTIFICATIONS\n\nexport const actionCreators = {\n    request: (): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        const token = await authService.getAccessToken();\n        fetch(`api/getNotifications`, {\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => {\n                return response.ok\n                    ? response.json()\n                    : []\n            })\n            .then(data => {\n                dispatch({ type: 'RECEIVE_NOTIFICATIONS', notifications: data });\n            });\n\n        dispatch({ type: 'REQUEST_NOTIFICATIONS' });\n    },\n    removeNotifications: (ids: string[]): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        if (ids != []) dispatch({ type: 'REMOVE_NOTIFICATIONS', ids: ids })\n    }\n};\n\nconst unloadedState: NotificationsState = { isLoading: false, notifications: [] };\n\nexport const reducer: Reducer<NotificationsState> = (state: NotificationsState | undefined, incomingAction: Action): NotificationsState => {\n    if (state === undefined) {\n        return unloadedState;\n    }\n\n    const action = incomingAction as KnownAction;\n    switch (action.type) {\n        case 'REQUEST_NOTIFICATIONS':\n            return {\n                isLoading: true,\n                notifications: state.notifications\n            };\n        case 'RECEIVE_NOTIFICATIONS':\n            return {\n                isLoading: false,\n                notifications: action.notifications\n            };\n        case 'NOTIFICATION_RECIEVED':\n            return {\n                ...state,\n                notifications: [action.notification, ...state.notifications]\n            }\n            break;\n    }\n    return state;\n};\n","import { Action, Reducer } from 'redux';\nimport { AppThunkAction } from '..';\nimport { Message } from '../Dialogs/DialogStore';\n\nexport interface MesNotificationsState {\n    messages: Message[]\n}\n\ninterface Receive {\n    type: 'RECEIVE';\n}\ninterface MESSAGE_RECEIVED {\n    type: 'MESSAGE_RECEIVED',\n    message: Message\n}\ninterface DELETE_NOTIFICATION {\n    type: 'DELETE_NOTIFICATION'\n    message: Message\n}\n\ntype KnownAction = Receive | MESSAGE_RECEIVED | DELETE_NOTIFICATION;\n\nexport const actionCreators = {\n    deleteNotification: (message: Message): AppThunkAction<KnownAction> => async (dispatch, getState) => {\n        setTimeout(() => {\n            dispatch({ type: 'DELETE_NOTIFICATION', message: message })\n        }, 5000)\n    },\n};\n\nconst unloadedState: MesNotificationsState = { messages: [] };\nexport const reducer: Reducer<MesNotificationsState> = (state: MesNotificationsState | undefined, incomingAction: Action): MesNotificationsState => {\n    if (state === undefined) {\n        return unloadedState;\n    }\n\n    const action = incomingAction as KnownAction;\n    switch (action.type) {\n        case 'DELETE_NOTIFICATION':\n            let a = state.messages.filter((data) => {\n                if (data.id != action.message.id)\n                    return data\n            })\n            return {\n                messages: a\n            };\n        case 'MESSAGE_RECEIVED':\n            if (window.location.pathname.includes(action.message.firstId) || window.location.pathname.includes(action.message.secondId))\n                return { ...state }\n            return {\n                messages: [...state.messages, action.message]\n            };\n            break;\n    }\n    return state;\n};\n","import * as LoginForm from './api-auth/LoginForm';\nimport * as Profile from './Profile/ProfileStore'\nimport * as EditProfile from './Profile/EditProfileStore'\nimport * as Friends from './Friends/FriendsStore'\nimport * as Dialog from '../store/Dialogs/DialogStore'\nimport * as CreatePost from '../store/Posts/PostsStore'\nimport * as PhotoAlbum from '../store/PhotoAlbum/PhotoAlbumStore'\nimport * as Group from '../store/Groups/GroupStore'\nimport * as Notification from '../store/Notifications/Notifications'\nimport * as MesNotification from '../store/MessageNotifications/MesNotifcationsStore'\n\nexport interface ApplicationState {\n    loginForm: LoginForm.LoginFormState | undefined\n    profile: Profile.ProfileState | undefined\n    editProfile: EditProfile.EditProfileState | undefined\n    friends: Friends.FriendsState | undefined\n    dialog: Dialog.DialogState | undefined\n    createPost: CreatePost.PostsState | undefined\n    photoAlbum: PhotoAlbum.PhotoAlbumSate | undefined\n    group: Group.GroupState | undefined\n    notification: Notification.NotificationsState | undefined\n    mesNotifications: MesNotification.MesNotificationsState | undefined\n}\n\nexport const reducers = {\n    loginForm: LoginForm.reducer,\n    profile: Profile.reducer,\n    editProfile: EditProfile.reducer,\n    friends: Friends.reducer,\n    dialog: Dialog.reducer,\n    createPost: CreatePost.reducer,\n    photoAlbum: PhotoAlbum.reducer,\n    group: Group.reducer,\n    notification: Notification.reducer,\n    mesNotifications: MesNotification.reducer\n};\n\nexport interface AppThunkAction<TAction> {\n    (dispatch: (action: TAction) => void, getState: () => ApplicationState): void;\n}\n","import * as signalR from \"@microsoft/signalr\"\nimport authService from \"../../components/api-authorization/AuthorizeService\";\n\nasync function getToken() {\n    const token = await authService.getAccessToken()\n    return token !== null ? token : ''\n}\nlet connection = new signalR.HubConnectionBuilder()\n    .withUrl(\"/chatHub\", {\n        accessTokenFactory: () => {\n            return getToken()\n        },\n    })\n    .configureLogging(signalR.LogLevel.None)\n    .build();\nexport const signalRRegisterCommands = async (store: any) => {\n    connection.on(\"ReceiveMessage\", async function (data) {\n        store.dispatch({ type: 'MESSAGE_RECEIVED', message: data })\n        const user = await authService.getUser()\n        store.dispatch({ type: 'GET_NUMBER_OF_UNREAD_DIALOGS', id: user.sub })\n    });\n    connection.on(\"NewPost\", function (data) {\n        data.comments = []\n        store.dispatch({ type: 'CREATE_POST_RECEIVE_OK', post: data })\n    });\n    connection.on(\"NewLike\", async function (data) {\n        let user = await authService.getUser()\n        store.dispatch({ type: 'LIKE_RECEIVED', newLike: data, user: user })\n    });\n    connection.on(\"NewComment\", function (data) {\n        store.dispatch({ type: 'COMMENT_RECEIVED', newComment: data })\n    });\n    connection.on(\"GetNumberOfUnreadDialogs\", function (data) {\n        if (document.getElementById('dialogsSpan')) {\n            if (data === 0) document.getElementById('dialogsSpan')!.className = \"badge badge-pill badge-warning d-none\"\n            else {\n                document.getElementById('dialogsSpan')!.textContent = data\n                document.getElementById('dialogsSpan')!.className = \"badge badge-pill badge-warning\"\n            }\n        }\n        else if (data !== 0) document.getElementById('Dialogs')!.innerHTML += `<span class=\"badge badge-pill badge-warning\" id=\"dialogsSpan\">${data}</span>`\n    })\n    connection.on(\"RecieveNotification\", function (data) {\n        store.dispatch({ type: 'NOTIFICATION_RECIEVED', notification: data })\n    });\n    async function start() {\n        try {\n            console.log('CONNECTION START')\n            await connection.start()\n            console.log(\"CONNECTED\")\n        } catch (err) {\n            console.log(err)\n            setTimeout(() => start(), 5000)\n        }\n    }\n    connection.onclose(async () => {\n        console.log('DISCONNECTED. Trying to reconnect')\n        start()\n    })\n    const user = await authService.getUser()\n    await connection.start().then(() => {\n        store.dispatch({ type: 'GET_NUMBER_OF_UNREAD_DIALOGS', id: user.sub })\n    })\n};\n\nexport const ping = (store: any) => (next: (arg0: any) => any) => async (action: any) => {\n    if (connection.state === 'Connected') {\n        switch (action.type) {\n            case 'GET_NUMBER_OF_UNREAD_DIALOGS':\n                connection.invoke('GetNumberOfUnreadDialogs', action.id)\n                break;\n            case 'CREATE_POST':\n                connection.invoke('SendPost', action.postText, action.pictureLink, action.userId, action.groupId)\n                break;\n            case 'MESSAGE_RECEIVED_VIEW':\n                connection.invoke('MESSAGE_RECEIVED_VIEW', action.message)\n                connection.invoke('GetNumberOfUnreadDialogs', action.message.secondId)\n                break;\n            case 'ADD_MESSAGE':\n                connection.invoke('SendMessage', action.user, action.message, action.to)\n                break;\n            case 'SEND_LIKE':\n                connection.invoke('SendLikes', action.userId, action.postId)\n                break;\n            case 'SEND_COMMENT':\n                connection.invoke('SendComment', action.userId, action.postId, action.text)\n                break;\n            case 'REMOVE_NOTIFICATIONS':\n                connection.invoke('RemoveNotifications', action.ids)\n                break;\n        }\n    }\n    return next(action)\n}","import * as React from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { connect } from 'react-redux';\nimport { ApplicationState } from '../../store';\nimport * as MesNotificationsStore from '../../store/MessageNotifications/MesNotifcationsStore';\nimport './mn.scss'\n\ntype MesNotificationsProps =\n    MesNotificationsStore.MesNotificationsState &\n    typeof MesNotificationsStore.actionCreators &\n    RouteComponentProps<{}>;\ninterface IState {\n}\nclass MesNotifications extends React.PureComponent<MesNotificationsProps, IState> {\n    constructor(props: MesNotificationsProps) {\n        super(props)\n        this.state = {\n\n        }\n    }\n    render() {\n        if (this.props.messages.length != 0)\n            return (\n                <div id=\"notifications\">\n                    {this.props.messages.map(data => {\n                        this.props.deleteNotification(data)\n                        return (\n                            <div key={data.id} className='content_not pb-4'>\n                                <div className=\"header_not\">\n                                    <img src={data.avatar} alt=\"\" width=\"30\" height=\"30\" className=\"img-avatar_not\" />\n                                    <div className=\"header_info_not\">\n                                        <h5 className=\"author_not\">{data.firstUserId}</h5>\n                                    </div>\n                                    <div className=\"text_not\">\n                                        {data.message}\n                                    </div>\n                                </div>\n                            </div>\n                        )\n                    })}\n                </div>\n            )\n        else return (<div></div>)\n\n    }\n};\n\nexport default connect(\n    (state: ApplicationState) => state.mesNotifications,\n    MesNotificationsStore.actionCreators\n)(MesNotifications as any);","import * as React from 'react';\nimport * as NotificationStore from '../../store/Notifications/Notifications';\nimport { RouteComponentProps } from 'react-router';\nimport { connect } from 'react-redux';\nimport { ApplicationState } from '../../store';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faBell } from '@fortawesome/free-solid-svg-icons'\n\ntype NotificationProps =\n    NotificationStore.NotificationsState &\n    typeof NotificationStore.actionCreators &\n    RouteComponentProps<{}>;\ninterface IState {\n    count: string\n}\nclass Notifications extends React.PureComponent<NotificationProps, IState> {\n    constructor(props: NotificationProps) {\n        super(props)\n        this.state = {\n            count: this.props.notifications.length == 0 ? '' : this.props.notifications.length.toString()\n        }\n    }\n    public componentDidMount() {\n        this.ensureDataFetched()\n    }\n    private remove() {\n        const a = this.props.notifications.map(data => data.id)\n        this.props.removeNotifications(a)\n        this.setState({ count: this.props.notifications.length == 0 ? '' : this.props.notifications.length.toString() })\n    }\n    private ensureDataFetched() {\n        this.props.request()\n    }\n    public renderButton() {\n        this.setState({ count: this.props.notifications.length == 0 ? '' : this.props.notifications.length.toString() })\n    }\n    render() {\n        var count = this.props.notifications.length == 0 ? '' : this.props.notifications.length.toString()\n        return (\n            <React.Fragment>\n                <div className=\"dropdown\">\n                    <button className=\"btn dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\"\n                        data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"\n                        onClick={() => this.remove()}>\n                        <span className=\"badge badge-pill badge-warning\">{count}</span>\n                        <FontAwesomeIcon icon={faBell} />\n                    </button>\n                    {count != ''\n                        ?\n                        <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                            {this.props.notifications.map((data) => {\n                                const b = data.image != \"\" ? <img src={data.image} width=\"10\" height=\"10\" alt=\"\" /> : <div></div>\n                                return (\n                                    <a key={data.id} className=\"dropdown-item\">\n                                        <div>\n                                            {b}\n                                            {data.text}\n                                        </div>\n                                    </a>\n                                )\n                            })}\n                        </div>\n                        :\n                        <div></div>}\n                </div>\n            </React.Fragment>\n        );\n    }\n};\n\nexport default connect(\n    (state: ApplicationState) => state.notification,\n    NotificationStore.actionCreators\n)(Notifications as any);","import React, { Component, Fragment } from 'react';\nimport { NavItem, NavLink } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport authService from './AuthorizeService';\nimport { ApplicationPaths } from './ApiAuthorizationConstants'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSignOutAlt, faUser, faUsers, faComments, faCommentAlt, faNewspaper } from '@fortawesome/free-solid-svg-icons'\nimport Notifications from '../Notifications/Notifications';\n\ninterface IProps {\n    //action: any\n}\ninterface IState {\n    isAuthenticated: boolean,\n    userName: string | null,\n    userId: string | null,\n}\n\nexport class LoginMenu extends Component<IProps, IState> {\n    _subscription: any\n    constructor(props: IProps) {\n        super(props);\n\n        this.state = {\n            isAuthenticated: false,\n            userName: null,\n            userId: null\n        };\n    }\n\n    componentDidMount() {\n        this._subscription = authService.subscribe(() => this.populateState());\n        this.populateState();\n    }\n\n    componentWillUnmount() {\n        authService.unsubscribe(this._subscription);\n    }\n\n    async populateState() {\n        const [isAuthenticated, user] = await Promise.all([authService.isAuthenticated(), authService.getUser()])\n        this.setState({\n            isAuthenticated,\n            userName: user && user.Email,\n            userId: user && user.sub\n        });\n    }\n\n    render() {\n        const { isAuthenticated, userName, userId } = this.state;\n        if (!isAuthenticated) {\n            const registerPath = `${ApplicationPaths.Register}`;\n            const loginPath = `${ApplicationPaths.Login}`;\n            return this.anonymousView(registerPath, loginPath);\n        } else {\n            const profilePath = `${ApplicationPaths.Profile}`;\n            const logoutPath = { pathname: `${ApplicationPaths.LogOut}`, state: { local: true } };\n            return this.authenticatedView(userName, userId, profilePath, logoutPath);\n        }\n    }\n\n    authenticatedView(userName: {} | null | undefined, userId: {} | null | undefined, profilePath: string, logoutPath: { pathname: string; state: { local: boolean; }; }) {\n        return (\n            <Fragment>\n                <NavItem>\n                    <NavLink tag={Link} className=\"text-dark\" to=\"/\"><FontAwesomeIcon icon={faNewspaper} /> News</NavLink>\n                </NavItem>\n                <NavItem>\n                    <NavLink tag={Link} className=\"text-dark\" to=\"/Friends\"><FontAwesomeIcon icon={faUsers} /> Friends</NavLink>\n                </NavItem>\n                <NavItem>\n                    <NavLink tag={Link} className=\"text-dark\" to=\"/Dialogs\"><div id='Dialogs'><FontAwesomeIcon icon={faCommentAlt} /> Dialogs</div></NavLink>\n                </NavItem>\n                <NavItem>\n                    <NavLink tag={Link} className=\"text-dark\" to=\"/ListOfGroups\"><FontAwesomeIcon icon={faComments} /> Groups</NavLink>\n                </NavItem>\n                <NavItem>\n                    <NavLink tag={Link} className=\"text-dark\" to={`/Profile/${userId}`}><FontAwesomeIcon icon={faUser} /> {userName} </NavLink>\n                </NavItem>\n                <NavItem>\n                    <NavLink tag={Link} className=\"text-dark\" to={logoutPath}><FontAwesomeIcon icon={faSignOutAlt} /></NavLink>\n                </NavItem>\n                <NavItem>\n                    <Notifications />\n                </NavItem>\n            </Fragment>);\n    }\n\n    anonymousView(registerPath: string, loginPath: string) {\n        return (<Fragment>\n            <NavItem>\n                <NavLink tag={Link} className=\"text-dark\" to={'/MyRegister'}>Register</NavLink>\n            </NavItem>\n            <NavItem>\n                <NavLink tag={Link} className=\"text-dark\" to={\"/MyLogin\"}>Login</NavLink>\n            </NavItem>\n        </Fragment>);\n    }\n}\n","import * as React from 'react';\nimport { Collapse, Container, Navbar, NavbarBrand, NavbarToggler, NavItem, NavLink } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport './NavMenu.css';\nimport { LoginMenu } from './api-authorization/LoginMenu';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUsers, faComments, faCommentAlt, faNewspaper } from '@fortawesome/free-solid-svg-icons'\n\nexport default class NavMenu extends React.PureComponent<{}, { isOpen: boolean }> {\n    public state = {\n        isOpen: false\n    };\n\n    public render() {\n        return (\n            <header>\n                <Navbar className=\"navbar navbar-expand-md navbar-light box-shadow mb-5 fixed-top bg-light\" >\n                    <Container>\n                        <NavbarBrand tag={Link} to=\"/\">MSN</NavbarBrand>\n                        <NavbarToggler onClick={this.toggle} className=\"mr-2\" />\n                        <Collapse className=\"\" isOpen={this.state.isOpen} navbar>\n                            <ul className=\"navbar-nav flex-grow\">\n                                <LoginMenu></LoginMenu>\n                            </ul>\n                        </Collapse>\n                    </Container>\n                </Navbar>\n            </header>\n        );\n    }\n\n    private toggle = () => {\n        this.setState({\n            isOpen: !this.state.isOpen\n        });\n    }\n}\n","import * as React from 'react';\nimport { Container } from 'reactstrap';\nimport MesNotifications from './MessageNotifications/MesNotifications';\nimport NavMenu from './NavMenu';\n\nexport default (props: { children?: React.ReactNode }) => (\n    <React.Fragment>\n        <NavMenu />\n        <Container>\n            <main role=\"main\" style={{ marginTop:\"65px\" }}>\n                <MesNotifications />\n                {props.children}\n            </main>\n        </Container>\n    </React.Fragment>\n);\n","import * as React from 'react';\nimport './commentInput.scss'\ninterface IProps {\n    postId: string\n    sendComment: any\n}\ninterface IState {\n    commentText: string\n}\n\nexport class CreateComment extends React.PureComponent<IProps, IState> {\n    constructor(props: IProps) {\n        super(props)\n        this.state = {\n            commentText: ''\n        }\n        this.handleInputChange = this.handleInputChange.bind(this)\n    }\n    componentDidMount() {\n    }\n    handleInputChange(event: React.ChangeEvent<HTMLTextAreaElement>) {\n        this.setState({ commentText: event.target.value });\n    }\n    renderCreatePost() {\n        return (\n            <div className=\"form__group field\">\n                <textarea className=\"form__field\" placeholder=\"Name\" name=\"name\" required\n                    onChange={this.handleInputChange} value={this.state.commentText} />\n                <label className=\"form__label\">Send comment</label>\n                <div className=\"btn_send\" onClick={this.sendComment.bind(this)}>\n                    <span className=\"noselect\">Send</span>\n                    <div id=\"circle\"></div>\n                </div>\n            </div>\n        )\n    }\n    sendComment(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\n        this.props.sendComment(this.props.postId, this.state.commentText)\n        this.setState({ commentText: \"\" })\n    }\n    render() {\n        return (\n            <div className=\"col-md-10 col-xs-6 col-xl-10 col-9\">\n                {this.renderCreatePost()}\n            </div>\n        )\n    }\n}","import * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport './listOfComments.scss'\nexport interface Comment {\n    id: string\n    userId: string\n    postId: string\n    text: string\n    createDate: Date\n    avatar: string\n    link: string\n}\ninterface IProps {\n    comments: Comment[]\n}\ninterface IState {\n}\n\nexport class ListOfComments extends React.PureComponent<IProps, IState> {\n    constructor(props: IProps) {\n        super(props)\n        this.state = {\n        }\n    }\n    showAll(id: string) {\n        const elementClass = document.getElementById(id)!.className\n        document.getElementById(id)!.className = elementClass == \"wall_post_text\" ? \"wall_post_text_cut\" : \"wall_post_text\"\n    }\n    renderText(text: string, id: string) {\n        if (text.length > 300) {\n            return (\n                <div>\n                    <div id={id} className=\"comment_post_text_cut\">{text}</div>\n                    <button className=\"btn btn-link\" onClick={() => this.showAll(id)}>Show all</button>\n                </div>\n            )\n        } else {\n            return (\n                <div className=\"comment_post_text\">{text}</div>\n            )\n        }\n    }\n    render() {\n        if (this.props.comments && this.props.comments.length != 0) {\n            return (\n                <div className=\"border-top border-bottom border-blue mb-1 comment_post_div\">\n                    {this.props.comments.map((data) => {\n                        let postDate = new Date(data.createDate)\n                        let date: string\n                        if (postDate.toLocaleDateString() == new Date().toLocaleDateString()) {\n                            date = postDate.toLocaleTimeString()\n                        } else {\n                            date = `${postDate.toLocaleDateString()} ${postDate.toLocaleTimeString()}`\n                        }\n                        return (\n                            <div key={data.id} className=\"comment_post_content mb-1\">\n                                <Link to={`/Profile/${data.link}`}>\n                                    <div className=\"comment_post_header\">\n                                        <img src={data.avatar} alt=\"\" width=\"30\" height=\"30\" className=\"img-avatar\" />\n                                        <div className=\"comment_post_header_info\">\n                                            <h5 className=\"comment_post_author\">{data.userId}</h5>\n                                            <div className=\"comment_post_date\">\n                                                {date}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </Link>\n                                <div>\n                                    {this.renderText(data.text, data.id)}\n                                </div>\n                            </div>\n                        )\n                    })}\n                </div>\n            )\n        } else {\n            return (\n                <div></div>\n            )\n        }\n    }\n}\n","import * as React from 'react';\nimport './image.scss'\n\ninterface IState {\n    link: string\n    background: JSX.Element\n}\ninterface ImgProps {\n    link: string\n    id: string\n}\n\nexport class Img extends React.PureComponent<ImgProps, IState> {\n    constructor(props: ImgProps) {\n        super(props)\n        this.state = {\n            link: '',\n            background: <div></div>\n        }\n    }\n    closeModalPicture() {\n        this.setState({\n            background:\n                <div></div>\n        })\n    }\n    renderModalPicture() {\n        this.setState({\n            background:\n                <div className=\"div_modal\">\n                    <img src={this.props.link} key={this.props.id} alt=\"\" className=\"image_modal\" />\n                    <div className=\"wrapper_btn\">\n                        <div className=\"close-button\" onClick={() => this.closeModalPicture()} >\n                            <div className=\"in\">\n                                <div className=\"close-button-block\"></div>\n                                <div className=\"close-button-block\"></div>\n                            </div>\n                            <div className=\"out\">\n                                <div className=\"close-button-block\"></div>\n                                <div className=\"close-button-block\"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n        })\n    }\n    render() {\n        return (\n            <div className=\"div_image mx-1\" id={this.props.id}>\n                {this.state.background}\n                <img onClick={() => this.renderModalPicture()} src={this.props.link} key={this.props.id} alt=\"\" className=\"image mb-1\" />\n            </div>\n        )\n    }\n}\n\n","import * as React from 'react';\nimport './btn.scss'\n\ninterface IProps {\n    postId: string\n    sendLike: (postId: string) => void\n    isLiked: boolean\n    likes: number\n}\ninterface IState {\n    isLiked: boolean\n}\n\nexport class LikeBtn extends React.PureComponent<IProps, IState> {\n    constructor(props: IProps) {\n        super(props)\n        this.state = {\n            isLiked: this.props.isLiked\n        }\n    }\n    sendLike(e: React.MouseEvent<HTMLLabelElement, MouseEvent>) {\n        this.props.sendLike(this.props.postId)\n    }\n    change(event: React.ChangeEvent<HTMLInputElement>) {\n        console.log(event.target.value)\n    }\n    render() {\n        return (\n            <div className=\"row\">\n                <input type=\"checkbox\" className=\"check\" id={this.props.postId} checked={this.props.isLiked} value={this.props.postId} onChange={this.change.bind(this)} />\n                <label htmlFor={this.props.postId} onClick={this.sendLike.bind(this)}>\n                    <svg id=\"heart-svg\" viewBox=\"467 392 58 57\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <g id=\"Group\" fill=\"none\" fillRule=\"evenodd\" transform=\"translate(467 392)\">\n                            <path d=\"M29.144 20.773c-.063-.13-4.227-8.67-11.44-2.59C7.63 28.795 28.94 43.256 29.143 43.394c.204-.138 21.513-14.6 11.44-25.213-7.214-6.08-11.377 2.46-11.44 2.59z\" id=\"heart\" fill=\"#AAB8C2\" />\n                            <circle id=\"main-circ\" fill=\"#E2264D\" opacity=\"0\" cx=\"29.5\" cy=\"29.5\" r=\"1.5\" />\n\n                            <g id=\"grp7\" opacity=\"0\" transform=\"translate(7 6)\">\n                                <circle id=\"oval1\" fill=\"#9CD8C3\" cx=\"2\" cy=\"6\" r=\"2\" />\n                                <circle id=\"oval2\" fill=\"#8CE8C3\" cx=\"5\" cy=\"2\" r=\"2\" />\n                            </g>\n\n                            <g id=\"grp6\" opacity=\"0\" transform=\"translate(0 28)\">\n                                <circle id=\"oval1\" fill=\"#CC8EF5\" cx=\"2\" cy=\"7\" r=\"2\" />\n                                <circle id=\"oval2\" fill=\"#91D2FA\" cx=\"3\" cy=\"2\" r=\"2\" />\n                            </g>\n\n                            <g id=\"grp3\" opacity=\"0\" transform=\"translate(52 28)\">\n                                <circle id=\"oval2\" fill=\"#9CD8C3\" cx=\"2\" cy=\"7\" r=\"2\" />\n                                <circle id=\"oval1\" fill=\"#8CE8C3\" cx=\"4\" cy=\"2\" r=\"2\" />\n                            </g>\n\n                            <g id=\"grp2\" opacity=\"0\" transform=\"translate(44 6)\">\n                                <circle id=\"oval2\" fill=\"#CC8EF5\" cx=\"5\" cy=\"6\" r=\"2\" />\n                                <circle id=\"oval1\" fill=\"#CC8EF5\" cx=\"2\" cy=\"2\" r=\"2\" />\n                            </g>\n\n                            <g id=\"grp5\" opacity=\"0\" transform=\"translate(14 50)\">\n                                <circle id=\"oval1\" fill=\"#91D2FA\" cx=\"6\" cy=\"5\" r=\"2\" />\n                                <circle id=\"oval2\" fill=\"#91D2FA\" cx=\"2\" cy=\"2\" r=\"2\" />\n                            </g>\n\n                            <g id=\"grp4\" opacity=\"0\" transform=\"translate(35 50)\">\n                                <circle id=\"oval1\" fill=\"#F48EA7\" cx=\"6\" cy=\"5\" r=\"2\" />\n                                <circle id=\"oval2\" fill=\"#F48EA7\" cx=\"2\" cy=\"2\" r=\"2\" />\n                            </g>\n\n                            <g id=\"grp1\" opacity=\"0\" transform=\"translate(24)\">\n                                <circle id=\"oval1\" fill=\"#9FC7FA\" cx=\"2.5\" cy=\"3\" r=\"2\" />\n                                <circle id=\"oval2\" fill=\"#9FC7FA\" cx=\"7.5\" cy=\"2\" r=\"2\" />\n                            </g>\n                        </g>\n                    </svg>\n                </label>\n                <div className=\"like_button_count\">{this.props.likes}</div>\n            </div>\n        )\n    }\n}\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { ApplicationState } from '../../store';\nimport * as CreatePostStore from '../../store/Posts/PostsStore'\nimport { CreateComment } from '../Comments/CreateComment';\nimport { ListOfComments } from '../Comments/ListOfComments';\nimport { Img } from '../Images/Image';\nimport { LikeBtn } from './LikeBtn';\n\ntype CreatePostProps =\n    CreatePostStore.PostsState &\n    typeof CreatePostStore.actionCreators &\n    RouteComponentProps<{}>;\n\ninterface IState {\n    postText: string\n    pictureLink: string[]\n}\n\nclass ListOfPosts extends React.PureComponent<CreatePostProps, IState> {\n    constructor(props: CreatePostProps) {\n        super(props)\n        this.state = {\n            postText: '',\n            pictureLink: []\n        }\n    }\n    componentDidMount() {\n        const location = window.location.pathname\n        if (location.includes('Profile')) {\n            this.props.requestPosts('Profile')\n        } else if (location.includes('Group')) {\n            this.props.requestPosts('Group')\n        } else if (location === '/') {\n            this.props.requestPosts('News')\n        }\n    }\n    showAll(id: string) {\n        const elementClass = document.getElementById(id)!.className\n        document.getElementById(id)!.className = elementClass == \"wall_post_text\" ? \"wall_post_text_cut\" : \"wall_post_text\"\n    }\n    renderText(text: string, id: string) {\n        if (text.length > 500) {\n            return (\n                <div>\n                    <div id={id} className=\"wall_post_text_cut\">{text}</div>\n                    <button className=\"btn btn-link\" onClick={() => this.showAll(id)}>Show all</button>\n                </div>\n            )\n        } else {\n            return (\n                <div className=\"wall_post_text pl-2\">{text}</div>\n            )\n        }\n    }\n    renderPosts() {\n        if (this.props.posts) {\n            return (\n                <div className=\"row justify-content-center\">\n                    <div className=\"px-1 col-12 col-lg-8 col-xl-8\">\n                        {this.props.posts.map(data => {\n                            let postDate = new Date(data.createDate)\n                            let date: string\n                            if (postDate.toLocaleDateString() == new Date().toLocaleDateString()) {\n                                date = postDate.toLocaleTimeString()\n                            } else {\n                                date = `${postDate.toLocaleDateString()} ${postDate.toLocaleTimeString()}`\n                            }\n                            return (\n                                <div key={data.id} className=\"post_content bg-white my-3 py-2 rounded shadow\">\n                                    <Link to={data.link}>\n                                        <div className=\"post_header pl-4\">\n                                            <img src={data.avatar} alt=\"\" width=\"50\" height=\"50\" className=\"img-avatar\" />\n                                            <div className=\"post_header_info\">\n                                                <h5 className=\"post_author\">{data.userId}</h5>\n                                                <div className=\"post_date\">\n                                                    {date}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </Link>\n                                    <div className=\"mt-3 pl-3\">\n                                        {this.renderText(data.postText, data.id)}\n                                        <div className=\"row ml-1 my-2\">\n                                            {data.pictureLink.map((picture) => {\n                                                return (\n                                                    <Img link={picture.pictureLink} id={picture.id} key={picture.id}/>\n                                                )\n                                            })}\n                                        </div>\n                                        <ListOfComments comments={data.comments} />\n                                        <div className=\"row\">\n                                            <CreateComment postId={data.id} sendComment={this.props.sendComment} />\n                                            <LikeBtn likes={data.likes} postId={data.id}\n                                                isLiked={data.isLiked} sendLike={this.props.sendLike} />\n                                        </div>\n                                    </div>\n                                </div>\n                            )\n                        })}\n                    </div>\n                </div>\n            )\n        }\n    }\n    render() {\n        return (\n            <div>\n                {this.renderPosts()}\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    (state: ApplicationState) => state.createPost,\n    CreatePostStore.actionCreators\n)(ListOfPosts as any);","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport ListOfPosts from './Posts/ListOfPosts';\n\ninterface IState {\n  isAuthenticated: boolean,\n  user: any\n}\n\nclass Home extends React.PureComponent<{}, IState> {\n  constructor(props: {}){\n    super(props)\n    this.state = {\n      isAuthenticated: false,\n      user: undefined\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <ListOfPosts />\n      </div>\n    )\n  }\n}\n\nexport default connect()(Home);\n","import React from 'react'\nimport { Component } from 'react'\nimport { Route, Redirect } from 'react-router-dom'\nimport { ApplicationPaths, QueryParameterNames } from './ApiAuthorizationConstants'\nimport authService from './AuthorizeService'\n\ninterface IProps {\n    path: string,\n    component: any\n}\ninterface IState {\n    ready: boolean,\n    authenticated: boolean\n}\n\nexport default class AuthorizeRoute extends Component<IProps, IState> {\n    _subscription : number | undefined\n    constructor(props: IProps) {\n        super(props);\n\n        this.state = {\n            ready: false,\n            authenticated: false\n        };\n    }\n\n    componentDidMount() {\n        this._subscription = authService.subscribe(() => this.authenticationChanged());\n        this.populateAuthenticationState();\n    }\n\n    componentWillUnmount() {\n        authService.unsubscribe(this._subscription);\n    }\n\n    render() {\n        const { ready, authenticated } = this.state;\n        var link = document.createElement(\"a\");\n        link.href = this.props.path;\n        const returnUrl = `${link.protocol}//${link.host}${link.pathname}${link.search}${link.hash}`;\n        const redirectUrl = `/MyLogin`\n        if (!ready) {\n            return <div></div>;\n        } else {\n            const { component: Component, ...rest } = this.props;\n            return <Route {...rest}\n                render={(props) => {\n                    if (authenticated) {\n                        return <Component {...props} />\n                    } else {\n                        return <Redirect to={redirectUrl} />\n                    }\n                }} />\n        }\n    }\n\n    async populateAuthenticationState() {\n        const authenticated = await authService.isAuthenticated();\n        this.setState({ ready: true, authenticated });\n    }\n\n    async authenticationChanged() {\n        this.setState({ ready: false, authenticated: false });\n        await this.populateAuthenticationState();\n    }\n}\n","import React from 'react'\nimport { Component } from 'react';\nimport authService from './AuthorizeService';\nimport { AuthenticationResultStatus } from './AuthorizeService';\nimport { LoginActions, QueryParameterNames, ApplicationPaths } from './ApiAuthorizationConstants';\n\ninterface IProps {\n    action: string\n}\ninterface IState {\n    message: any\n}\n\nexport class Login extends Component<IProps, IState> {\n    constructor(props: IProps) {\n        super(props);\n\n        this.state = {\n            message: undefined\n        };\n    }\n\n    componentDidMount() {\n        const action = this.props.action;\n        \n        switch (action) {\n            case LoginActions.Login:\n                this.login(this.getReturnUrl(undefined));\n                break;\n            case LoginActions.LoginCallback:\n                this.processLoginCallback();\n                break;\n            case LoginActions.LoginFailed:\n                const params = new URLSearchParams(window.location.search);\n                const error = params.get(QueryParameterNames.Message);\n                this.setState({ message: error });\n                break;\n            case LoginActions.Profile:\n                this.redirectToProfile();\n                break;\n            case LoginActions.Register:\n                this.redirectToRegister();\n                break;\n            default:\n                throw new Error(`Invalid action '${action}'`);\n        }\n    }\n\n    render() {\n        const action = this.props.action;\n        const { message } = this.state;\n\n        if (!!message) {\n            return <div>{message}</div>\n        } else {\n            switch (action) {\n                case LoginActions.Login:\n                    return (<div>Processing login</div>);\n                case LoginActions.LoginCallback:\n                    return (<div>Processing login callback</div>);\n                case LoginActions.Profile:\n                case LoginActions.Register:\n                    return (<div></div>);\n                default:\n                    throw new Error(`Invalid action '${action}'`);\n            }\n        }\n    }\n\n    async login(returnUrl: string) {\n        const state = { returnUrl };\n        const result: any = await authService.signIn(state);\n        switch (result.status) {\n            case AuthenticationResultStatus.Redirect:\n                break;\n            case AuthenticationResultStatus.Success:\n                await this.navigateToReturnUrl(returnUrl);\n                break;\n            case AuthenticationResultStatus.Fail:\n                this.setState({ message: result.message });\n                break;\n            default:\n                throw new Error(`Invalid status result ${result.status}.`);\n        }\n    }\n\n    async processLoginCallback() {\n        const url = window.location.href;\n        const result: any = await authService.completeSignIn(url);\n        switch (result.status) {\n            case AuthenticationResultStatus.Redirect:\n                // There should not be any redirects as the only time completeSignIn finishes\n                // is when we are doing a redirect sign in flow.\n                throw new Error('Should not redirect.');\n            case AuthenticationResultStatus.Success:\n                await this.navigateToReturnUrl(this.getReturnUrl(result.state));\n                break;\n            case AuthenticationResultStatus.Fail:\n                this.setState({ message: result.message });\n                break;\n            default:\n                throw new Error(`Invalid authentication result status '${result.status}'.`);\n        }\n    }\n\n    getReturnUrl(state: any) {\n        const params = new URLSearchParams(window.location.search);\n        const fromQuery = params.get(QueryParameterNames.ReturnUrl);\n        if (fromQuery && !fromQuery.startsWith(`${window.location.origin}/`)) {\n            // This is an extra check to prevent open redirects.\n            throw new Error(\"Invalid return url. The return url needs to have the same origin as the current page.\")\n        }\n        return (state && state.returnUrl) || fromQuery || `${window.location.origin}/`;\n    }\n\n    redirectToRegister() {\n        this.redirectToApiAuthorizationPath(`${ApplicationPaths.IdentityRegisterPath}?${QueryParameterNames.ReturnUrl}=${encodeURI(ApplicationPaths.Login)}`);\n    }\n\n    redirectToProfile() {\n        this.redirectToApiAuthorizationPath(ApplicationPaths.IdentityManagePath);\n    }\n\n    redirectToApiAuthorizationPath(apiAuthorizationPath: any) {\n        const redirectUrl = `${window.location.origin}${apiAuthorizationPath}`;\n        // It's important that we do a replace here so that when the user hits the back arrow on the\n        // browser he gets sent back to where it was on the app instead of to an endpoint on this\n        // component.\n        window.location.replace(redirectUrl);\n    }\n\n    navigateToReturnUrl(returnUrl: string) {\n        // It's important that we do a replace here so that we remove the callback uri with the\n        // fragment containing the tokens from the browser history.\n        window.location.replace(returnUrl);\n    }\n}\n","import React from 'react'\nimport { Component } from 'react';\nimport authService from './AuthorizeService';\nimport { AuthenticationResultStatus } from './AuthorizeService';\nimport { QueryParameterNames, LogoutActions, ApplicationPaths } from './ApiAuthorizationConstants';\n\n\ninterface IProps {\n    action: any\n}\ninterface IState {\n    message: any,\n    isReady: boolean,\n    authenticated: boolean\n}\n// The main responsibility of this component is to handle the user's logout process.\n// This is the starting point for the logout process, which is usually initiated when a\n// user clicks on the logout button on the LoginMenu component.\nexport class Logout extends Component<IProps, IState> {\n    constructor(props: IProps) {\n        super(props);\n\n        this.state = {\n            message: undefined,\n            isReady: false,\n            authenticated: false\n        };\n    }\n\n    componentDidMount() {\n        const action = this.props.action;\n        switch (action) {\n            case LogoutActions.Logout:\n                if (!!window.history.state.state.local) {\n                    this.logout(this.getReturnUrl(undefined));\n                } else {\n                    // This prevents regular links to <app>/authentication/logout from triggering a logout\n                    this.setState({ isReady: true, message: \"The logout was not initiated from within the page.\" });\n                }\n                break;\n            case LogoutActions.LogoutCallback:\n                this.processLogoutCallback();\n                break;\n            case LogoutActions.LoggedOut:\n                this.setState({ isReady: true, message: \"You successfully logged out!\" });\n                break;\n            default:\n                throw new Error(`Invalid action '${action}'`);\n        }\n\n        this.populateAuthenticationState();\n    }\n\n    render() {\n        const { isReady, message } = this.state;\n        if (!isReady) {\n            return <div></div>\n        }\n        if (!!message) {\n            return (<div>{message}</div>);\n        } else {\n            const action = this.props.action;\n            switch (action) {\n                case LogoutActions.Logout:\n                    return (<div>Processing logout</div>);\n                case LogoutActions.LogoutCallback:\n                    return (<div>Processing logout callback</div>);\n                case LogoutActions.LoggedOut:\n                    return (<div>{message}</div>);\n                default:\n                    throw new Error(`Invalid action '${action}'`);\n            }\n        }\n    }\n\n    async logout(returnUrl: string) {\n        const state = { returnUrl };\n        const isauthenticated = await authService.isAuthenticated();\n        if (isauthenticated) {\n            const result: any = await authService.signOut(state);\n            switch (result.status) {\n                case AuthenticationResultStatus.Redirect:\n                    break;\n                case AuthenticationResultStatus.Success:\n                    await this.navigateToReturnUrl(returnUrl);\n                    break;\n                case AuthenticationResultStatus.Fail:\n                    this.setState({ message: result.message });\n                    break;\n                default:\n                    throw new Error(\"Invalid authentication result status.\");\n            }\n        } else {\n            this.setState({ message: \"You successfully logged out!\" });\n        }\n    }\n\n    async processLogoutCallback() {\n        const url = window.location.href;\n        const result: any = await authService.completeSignOut(url);\n        switch (result.status) {\n            case AuthenticationResultStatus.Redirect:\n                // There should not be any redirects as the only time completeAuthentication finishes\n                // is when we are doing a redirect sign in flow.\n                throw new Error('Should not redirect.');\n            case AuthenticationResultStatus.Success:\n                await this.navigateToReturnUrl(this.getReturnUrl(result.state));\n                break;\n            case AuthenticationResultStatus.Fail:\n                this.setState({ message: result.message });\n                break;\n            default:\n                throw new Error(\"Invalid authentication result status.\");\n        }\n    }\n\n    async populateAuthenticationState() {\n        const authenticated = await authService.isAuthenticated();\n        this.setState({ isReady: true, authenticated });\n    }\n\n    getReturnUrl(state: any) {\n        const params = new URLSearchParams(window.location.search);\n        const fromQuery = params.get(QueryParameterNames.ReturnUrl);\n        if (fromQuery && !fromQuery.startsWith(`${window.location.origin}/`)) {\n            // This is an extra check to prevent open redirects.\n            throw new Error(\"Invalid return url. The return url needs to have the same origin as the current page.\")\n        }\n        return (state && state.returnUrl) ||\n            fromQuery ||\n            `${window.location.origin}${ApplicationPaths.LoggedOut}`;\n    }\n\n    navigateToReturnUrl(returnUrl: string) {\n        return window.location.replace(returnUrl);\n    }\n}\n","import React, { Component, Fragment } from 'react';\nimport { Route } from 'react-router';\nimport { Login } from './Login'\nimport { Logout } from './Logout'\nimport { ApplicationPaths, LoginActions, LogoutActions } from './ApiAuthorizationConstants';\n\nexport default class ApiAuthorizationRoutes extends Component {\n\n  render () {\n    return(\n      <Fragment>\n          <Route path={ApplicationPaths.Login} render={() => loginAction(LoginActions.Login)} />\n          <Route path={ApplicationPaths.LoginFailed} render={() => loginAction(LoginActions.LoginFailed)} />\n          <Route path={ApplicationPaths.LoginCallback} render={() => loginAction(LoginActions.LoginCallback)} />\n          <Route path={ApplicationPaths.Profile} render={() => loginAction(LoginActions.Profile)} />\n          <Route path={ApplicationPaths.Register} render={() => loginAction(LoginActions.Register)} />\n          <Route path={ApplicationPaths.LogOut} render={() => logoutAction(LogoutActions.Logout)} />\n          <Route path={ApplicationPaths.LogOutCallback} render={() => logoutAction(LogoutActions.LogoutCallback)} />\n          <Route path={ApplicationPaths.LoggedOut} render={() => logoutAction(LogoutActions.LoggedOut)} />\n      </Fragment>);\n  }\n}\n\nfunction loginAction(name: string){\n    return (<Login action={name}></Login>);\n}\n\nfunction logoutAction(name: string) {\n    return (<Logout action={name}></Logout>);\n}\n","import React from 'react';\nimport * as LoginFormState from '../../store/api-auth/LoginForm';\nimport { RouteComponentProps } from 'react-router';\nimport { connect } from 'react-redux';\nimport { ApplicationState } from '../../store';\nimport './form.scss'\n\ntype LoginFormProps =\n    LoginFormState.LoginFormState &\n    typeof LoginFormState.actionCreators &\n    RouteComponentProps<{}>;\ninterface IState {\n    Email: string,\n    Password: string,\n    RememberMe: boolean,\n    message: any\n}\nclass LoginForm extends React.PureComponent<LoginFormProps, IState> {\n    constructor(props: LoginFormProps) {\n        super(props);\n        this.state = {\n            Email: '',\n            Password: '',\n            RememberMe: false,\n            message: undefined\n        };\n    }\n\n    public handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        this.props.request(this.state.Email, this.state.Password, true, 'Login');\n    };\n\n    handleChangeEmail(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({ Email: event.target.value });\n    }\n    handleChangePassword(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({ Password: event.target.value });\n    }\n\n    public render() {\n        return (\n            <div className=\"bg-white row col-md-6 col-xs-6 col-xl-4 col-12 justify-content-center mx-auto my-5 py-2 rounded shadow\">\n                <div className=\"auth__group field col-12 my-1\">\n                    <input type='email' className=\"auth__field\" value={this.state.Email} required\n                        onChange={this.handleChangeEmail.bind(this)} id='email' />\n                    <label htmlFor='Input.Email' className=\"auth__label\">Email</label>\n                </div>\n                <div className=\"auth__group field col-12 my-1\">\n                    <input type='password' value={this.state.Password} className=\"auth__field\" required\n                        onChange={this.handleChangePassword.bind(this)} id='password' />\n                    <label htmlFor='Input.Password' className=\"auth__label\">Password</label>\n                </div>\n                {this.props.isLoading}\n                <div className=\"auth_send col-12\" onClick={this.handleSubmit.bind(this)}>\n                    <span className=\"noselect\">Login</span>\n                    <div id=\"circle\"></div>\n                </div>\n                <p>{this.props.status}</p>\n                {this.props.isLoading}\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    (state: ApplicationState) => state.loginForm,\n    LoginFormState.actionCreators\n)(LoginForm as any);","import * as React from 'react';\n\nexport const NotFound: React.FC<{}> = (props) => {\n    return (\n        <div>\n            Not Found\n        </div>\n    )\n}","import React from 'react';\nimport * as LoginFormState from '../../store/api-auth/LoginForm';\nimport { RouteComponentProps } from 'react-router';\nimport { connect } from 'react-redux';\nimport { ApplicationState } from '../../store';\nimport authService from '../api-authorization/AuthorizeService';\nimport './form.scss'\n\ntype LoginFormProps =\n    LoginFormState.LoginFormState &\n    typeof LoginFormState.actionCreators &\n    RouteComponentProps<{}>;\ninterface IState {\n    Email: string,\n    Password: string,\n    ConfirmPassword: string,\n    state: string\n}\nclass RegisterForm extends React.PureComponent<LoginFormProps, IState> {\n    constructor(props: LoginFormProps) {\n        super(props);\n        this.state = {\n            Email: '',\n            Password: '',\n            ConfirmPassword: '',\n            state: ''\n        };\n    }\n\n    public handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        const returnUrl = \"https://localhost:5001/\"\n        if (this.state.ConfirmPassword === this.state.Password) {\n            this.props.request(this.state.Email, this.state.Password, true, 'Register')\n            authService.signIn({ returnUrl: returnUrl })\n            window.location.replace(returnUrl)\n        }\n    };\n\n    handleChangeEmail(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({ Email: event.target.value });\n    }\n    handleChangePassword(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({ Password: event.target.value });\n    }\n    handleChangeConfirmPassword(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({ ConfirmPassword: event.target.value });\n    }\n\n    public render() {\n        return (\n            <div className=\"bg-white row col-md-6 col-xs-6 col-xl-4 col-12 justify-content-center mx-auto my-5 py-2 rounded shadow\">\n                <div className=\"auth__group field col-12 my-1\">\n                    <input type='email' className=\"auth__field\" value={this.state.Email} required\n                        onChange={this.handleChangeEmail.bind(this)} id='email' />\n                    <label htmlFor='Input.Email' className=\"auth__label\">Email</label>\n                </div>\n                <div className=\"auth__group field col-12 my-1\">\n                    <input type='password' value={this.state.Password} className=\"auth__field\" required\n                        onChange={this.handleChangePassword.bind(this)} id='password' />\n                    <label htmlFor='Input.Password' className=\"auth__label\">Password</label>\n                </div>\n                <div className=\"auth__group field col-12 my-1\">\n                    <input type='password' value={this.state.ConfirmPassword} className=\"auth__field\" required\n                        onChange={this.handleChangeConfirmPassword.bind(this)} id='Confirmpassword' />\n                    <label className=\"auth__label\">Confirm password</label>\n                </div>\n                <div className=\"auth_send col-12\" onClick={this.handleSubmit.bind(this)}>\n                    <span className=\"noselect\">Register</span>\n                    <div id=\"circle\"></div>\n                </div>\n                {this.props.isLoading}\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    (state: ApplicationState) => state.loginForm,\n    LoginFormState.actionCreators\n)(RegisterForm as any);","import * as React from 'react';\n\nexport const ConfirmEmailSuccess: React.FC<{}> = (props) => {\n    return (\n        <div>\n            You successfully confirmed email. Please, log in.\n        </div>\n    )\n}\n\nexport const BadConfirmEmail: React.FC<{}> = (props) => {\n    return (\n        <div>\n            BadConfirmEmail\n        </div>\n    )\n}","import * as React from 'react';\nimport $ from \"jquery\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFileImage } from '@fortawesome/free-solid-svg-icons';\ninterface IProps {\n  onImageChange: any\n  id: string\n}\n\nexport class FileInput extends React.Component<IProps> {\n  fileInput: React.RefObject<HTMLInputElement>;\n  constructor(props: IProps) {\n    super(props);\n    this.fileInput = React.createRef();\n  }\n  componentDidMount() {\n    console.log(this.props.onImageChange )\n  }\n  handleSubmit(event: React.ChangeEvent<HTMLInputElement>) {\n    event.preventDefault();\n    this.upload(this.fileInput.current!.files![0])\n  }\n  upload(file: File) {\n    if (!file || !file.type.match(/image.*/)) return;\n    var fd = new FormData();\n    fd.append(\"image\", file);\n    fd.append(\"title\", \"stepa123\");\n    fd.append(\"client_secret\", \"bda650e874b80220bab96aa22c383a5e4581cead\");\n    var xhr = new XMLHttpRequest();\n    console.log('upload')\n    xhr.open(\"POST\", \"https://api.imgur.com/3/image\");\n    xhr.setRequestHeader('Authorization', 'Client-ID 1337b94d530e99b');\n    var that = this\n    console.log('upload')\n    xhr.onload = function () {\n      console.log('UPLODAD2')\n      that.props.onImageChange(JSON.parse(xhr.responseText).data.link)\n      $(\"#cartinka\").empty();\n      $(\"#cartinka\").append('<img class=\"img-thumbnail w-25 h-25\" alt=\"smaple image\" src=\"' + JSON.parse(xhr.responseText).data.link + '\" />');\n    };\n    console.log('UPLODAD1')\n    xhr.send(fd);\n  }\n\n\n  renderInput() {\n    return (\n      <div className=\"box\">\n        <input type=\"file\"  id={this.props.id} className=\"inputfile inputfile-1\" onChange={this.handleSubmit.bind(this)} ref={this.fileInput} />\n        <label htmlFor={this.props.id}>\n          <FontAwesomeIcon icon={faFileImage} />\n          <span className=\"text\">Choose file</span>\n          <div id=\"circle\"></div>\n        </label>\n      </div>\n    )\n  }\n  render() {\n    return (\n      <div>\n        {this.renderInput()}\n      </div>\n    );\n  }\n}\n\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\nimport { ApplicationState } from '../../store';\nimport * as CreatePostStore from '../../store/Posts/PostsStore'\nimport { Img } from '../Images/Image';\nimport { FileInput } from '../Profile/FileInput';\nimport './createPost.scss'\n\ntype CreatePostProps =\n    CreatePostStore.PostsState &\n    typeof CreatePostStore.actionCreators &\n    RouteComponentProps<{}>;\n\ninterface IState {\n    postText: string\n    pictureLink: string[]\n}\n\nclass CreatePost extends React.PureComponent<CreatePostProps, IState> {\n    constructor(props: CreatePostProps) {\n        super(props)\n        this.state = {\n            postText: '',\n            pictureLink: []\n        }\n        this.handleInputChange = this.handleInputChange.bind(this)\n        this.handleInputFileChange = this.handleInputFileChange.bind(this)\n    }\n    componentDidMount() {\n        window.location.pathname.includes('Profile')\n            ? this.props.requestPosts('Profile') : this.props.requestPosts('Group')\n    }\n    handleInputFileChange(file: string) {\n        this.setState(prevState => ({\n            ...prevState,\n            pictureLink: [...prevState.pictureLink, file]\n        }))\n    }\n    handleInputChange(event: React.ChangeEvent<HTMLTextAreaElement>) {\n        this.setState({ postText: event.target.value });\n    }\n    renderCreatePost() {\n        if (window.location.pathname.includes('Profile')) {\n            if (this.props.user != null) {\n                return (\n                    this.props.user.isAuthor\n                        ?\n                        <div className=\"form__group_post field rounded shadow bg-white px-5\">\n                            <textarea className=\"form__field_post\" placeholder=\"Name\" name=\"name\" required\n                                onChange={this.handleInputChange} value={this.state.postText} />\n                            <label className=\"form__label_post\">Send post</label>\n                            <div className=\"d-flex\">\n                                <div className=\"btn_send_post\" onClick={this.sendPost.bind(this)}>\n                                    <span className=\"noselect\">Send</span>\n                                    <div id=\"circle\"></div>\n                                </div>\n                                <FileInput onImageChange={this.handleInputFileChange} id={'post'} key={\"post\"}/>\n                            </div>\n                            {this.state.pictureLink != []\n                                    ? this.state.pictureLink.map((data, index) => <Img link={data} id={index.toString()} />)\n                                    : <div></div>}\n                        </div>\n                        : <div></div>\n                )\n            }\n        } else {\n            if (this.props.group != null) {\n                return (\n                    true\n                        ?\n                        <div className=\"form__group_post field rounded shadow bg-white px-5\">\n                            <textarea className=\"form__field_post\" placeholder=\"Name\" name=\"name\" required\n                                onChange={this.handleInputChange} value={this.state.postText} />\n                            <label className=\"form__label_post\">Send post</label>\n                            <div className=\"d-flex\">\n                                <div className=\"btn_send_post\" onClick={this.sendPost.bind(this)}>\n                                    <span className=\"noselect\">Send</span>\n                                    <div id=\"circle\"></div>\n                                </div>\n                                <FileInput id={'post'} onImageChange={this.handleInputFileChange} />\n                            </div>\n                        </div>\n                        : <div></div>\n                )\n            }\n        }\n    }\n    sendPost(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\n        if (window.location.pathname.includes('Profile')) {\n            this.props.sendPost(this.state.postText, this.state.pictureLink)\n            this.setState({\n                postText: '',\n                pictureLink: []\n            })\n        } else {\n            this.props.sendPost(this.state.postText, this.state.pictureLink, this.props.group!.id)\n            this.setState({\n                postText: '',\n                pictureLink: []\n            })\n        }\n    }\n    render() {\n        return (\n            <div>\n                {this.renderCreatePost()}\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    (state: ApplicationState) => state.createPost,\n    CreatePostStore.actionCreators\n)(CreatePost as any);","import * as React from 'react';\nimport * as PhotoAlbumStore from '../../store/PhotoAlbum/PhotoAlbumStore';\nimport { RouteComponentProps } from 'react-router';\nimport { connect } from 'react-redux';\nimport { ApplicationState } from '../../store';\nimport { FileInput } from '../Profile/FileInput';\nimport { Img } from '../Images/Image';\n\ntype PhotoAlbumProps =\n    PhotoAlbumStore.PhotoAlbumSate &\n    typeof PhotoAlbumStore.actionCreators &\n    RouteComponentProps<{}>;\ninterface IState {\n    pictureLinks: string[]\n}\nclass PhotoAlbum extends React.PureComponent<PhotoAlbumProps, IState> {\n    constructor(props: PhotoAlbumProps) {\n        super(props)\n        this.state = {\n            pictureLinks: []\n        }\n        this.handleInputFileChange = this.handleInputFileChange.bind(this)\n    }\n    handleInputFileChange(file: string) {\n        console.log('PHOTO FILE: ', file)\n        this.setState(prevState => ({\n            ...prevState,\n            pictureLinks: [...prevState.pictureLinks, file]\n        }))\n    }\n    public componentDidMount() {\n        this.props.requestAlbum()\n    }\n    public renderAlbum() {\n        if (this.props.pictures != []) return (\n            <div>\n                {this.props.pictures.map((data, index) => {\n                    return (\n                        <div className=\"image_album my-2\" key={index}>\n                            <Img link={data.pictureLink} id={index.toString()} key={index} />\n                        </div>\n                    )\n                })}\n            </div>\n        )\n    }\n    renderStateAlbum() {\n        if (this.state.pictureLinks != []) return (\n            this.state.pictureLinks.map((data, index) => {\n                return (\n                    <div className=\"image_album p-3\" key={data}>\n                        <Img link={data} id={index.toString()} key={index} />\n                    </div>\n                )\n            })\n        )\n    }\n    addToAlbum(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\n        this.props.addToAlbum(this.state.pictureLinks)\n        this.setState({ pictureLinks: [] })\n    }\n    renderCreatePost() {\n        return (\n            this.props.isAuthor\n                ? <div className=\"d-flex p-2\">\n                    <div className=\"btn_send_post\" id=\"photo\" onClick={this.addToAlbum.bind(this)}>\n                        <span className=\"noselect\">Add photo to album</span>\n                        <div id=\"circle\"></div>\n                    </div>\n                    <FileInput onImageChange={this.handleInputFileChange} id={\"photo\"} key={\"photo\"}/>\n                </div>\n                : <div></div>\n        )\n    }\n    public render() {\n        if (this.props.isAuthor || this.props.pictures != [])\n            return (\n                <div>\n                    {this.renderCreatePost()}\n                    {this.renderAlbum()}\n                    <div>\n                        {this.renderStateAlbum()}\n                    </div>\n                </div>\n            )\n        else\n            return (\n                <div></div>\n            )\n    }\n};\n\nexport default connect(\n    (state: ApplicationState) => state.photoAlbum,\n    PhotoAlbumStore.actionCreators\n)(PhotoAlbum as any);","import * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Friend } from '../../store/Friends/FriendsStore';\ninterface IProps {\n    listOfFrfiends: Friend[]\n}\n\nexport class ListOfFriends extends React.Component<IProps> {\n    render() {\n        return (\n            this.props.listOfFrfiends.map((data) => {\n                let name = data.firstName.length == 0 ? 'Name' : data.firstName\n                return (\n                    <div className=\"people_cell\" key={data.id}>\n                        <Link to={`/Profile/${data.id}`} >\n                            <img src={data.avatar} height=\"50\" width=\"50\" className=\"img-avatar\" alt=\"\"/>\n                            <div className=\"people_cell_name\">{name}</div>\n                        </Link>\n                    </div>\n                )\n            })\n        )\n    }\n}\n\n","import * as React from 'react';\nimport * as ProfileStore from '../../store/Profile/ProfileStore';\nimport { RouteComponentProps } from 'react-router';\nimport { connect } from 'react-redux';\nimport { ApplicationState } from '../../store';\nimport { Link } from 'react-router-dom';\nimport CreatePost from '../Posts/CreatePost';\nimport PhotoAlbum from '../PhotoAlbum/PhotoAlbum';\nimport ListOfPosts from '../Posts/ListOfPosts';\nimport './profile.scss'\nimport { Img } from '../Images/Image';\nimport { ListOfFriends } from './ListOfSubs';\n\ntype ProfileProps =\n    ProfileStore.ProfileState &\n    typeof ProfileStore.actionCreators &\n    RouteComponentProps<{ userId: string }>;\n\nclass Profile extends React.PureComponent<ProfileProps> {\n    public componentDidMount() {\n        this.ensureDataFetched()\n    }\n    public componentDidUpdate() {\n        if (this.props.user !== null && this.props.user!.id !== this.props.match.params.userId)\n            this.ensureDataFetched()\n    }\n    private ensureDataFetched() {\n        this.props.requestProfile(this.props.match.params.userId)\n        this.props.requestFriends(this.props.match.params.userId)\n    }\n    private renderUser() {\n        if (this.props.user !== null) {\n            return (\n                <div>\n                    <div className=\"row justify-content-center\">\n                        <div className=\"page_block rounded shadow bg-white py-2 mb-3 col-6 col-lg-4 col-xl-5 align-self-start ml-3\">\n                            <Img link={this.props.user.avatar} id={this.props.user.id} />\n                            {this.props.user.isAuthor\n                                ? <div className=\"text-center\">\n                                    <Link to=\"/EditProfile\">\n                                        <div className=\"btn_send_profile\">\n                                            <span className=\"noselect\">Edit Profile</span>\n                                            <div id=\"circle\"></div>\n                                        </div>\n                                    </Link>\n                                    <Link to=\"/CreateGroup\">\n                                        <div className=\"btn_send_profile\">\n                                            <span className=\"noselect\">CreateGroup</span>\n                                            <div id=\"circle\"></div>\n                                        </div>\n                                    </Link>\n                                </div>\n                                : <div className=\"text-center\">\n                                    <Link to={`/Dialog/${this.props.user.id}`}>\n                                        <div className=\"btn_send_profile\">\n                                            <span className=\"noselect\">Chat now!</span>\n                                            <div id=\"circle\"></div>\n                                        </div>\n                                    </Link>\n                                </div>}\n                        </div>\n                        <div className=\"col-6 col-lg-4 col-xl-5 div_info mb-5\">\n                            <div className=\"rounded shadow bg-white p-2\">\n                                <h5>{this.props.user.firstName} {this.props.user.secondName}</h5>\n                                <p>City: {this.props.user.city}</p>\n                                <p>Coutnry: {this.props.user.country}</p>\n                                <p>Date of birth: {this.props.user.dateOfBirth.toUTCString}</p>\n                                <p>Languages: {this.props.user.languages}</p>\n                                <p>Family status: {this.props.user.familyStatus}</p>\n                            </div>\n                            <div className=\"rounded shadow bg-white p-2 mt-3 subs\">\n                                <h5>Subscribers:</h5>\n                                <ListOfFriends listOfFrfiends={this.props.listOfFriends} />\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"row justify-content-center\">\n                        <div className=\"col-12 col-lg-8 col-xl-8 px-1 mb-3 bg-white rounded\">\n                            <PhotoAlbum />\n                        </div>\n                    </div>\n                    <div className=\"row justify-content-center\">\n                        <div className=\"col-12 col-lg-8 col-xl-8 px-1\">\n                            <CreatePost />\n                        </div>\n                    </div>\n                    <div>\n                        <ListOfPosts />\n                    </div>\n                </div >\n            )\n        } else {\n            return (\n                <div></div>\n            )\n        }\n    }\n    public render() {\n        return (\n            <React.Fragment>\n                {this.props.isLoading}\n                {this.renderUser()}\n            </React.Fragment>\n        );\n    }\n};\n\nexport default connect(\n    (state: ApplicationState) => state.profile,\n    ProfileStore.actionCreators\n)(Profile as any);","import * as React from 'react';\nimport * as EditProfileStore from '../../store/Profile/EditProfileStore';\nimport { RouteComponentProps } from 'react-router';\nimport { connect } from 'react-redux';\nimport { ApplicationState } from '../../store';\nimport { UserModel } from '../../store/Profile/ProfileStore';\nimport { FileInput } from './FileInput';\nimport '../api-auth/form.scss'\nimport { Img } from '../Images/Image';\n\ntype EditProfileProps =\n    EditProfileStore.EditProfileState &\n    typeof EditProfileStore.actionCreators &\n    RouteComponentProps<{}>;\n\nclass EditProfile extends React.PureComponent<EditProfileProps, { user: UserModel, isLoading: JSX.Element }> {\n    constructor(props: EditProfileProps) {\n        super(props);\n        this.state = {\n            user: this.props.user,\n            isLoading: <div></div>\n        };\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.handleInputFileChange = this.handleInputFileChange.bind(this);\n    }\n    public componentDidMount() {\n        this.props.getEditProfile()\n        this.setState({ user: this.props.user })\n    }\n    public handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        this.props.postEditProfile(this.state.user);\n    };\n    handleInputFileChange(file: string) {\n        console.log('FILE: ', file)\n        this.setState(({ user }) => ({\n            user: {\n                ...user,\n                avatar: file\n            }\n        }))\n    }\n    handleInputChange(event: React.ChangeEvent<HTMLInputElement>) {\n        const target = event.target;\n        const value: string = target.value;\n        let name: string = target.name;\n        this.setState(({ user }) => ({\n            user: {\n                ...user,\n                [name]: value\n            }\n        }))\n    }\n\n    public render() {\n        var date = new Date(this.state.user.dateOfBirth)\n        var values: string[] = [date.getDate().toString(), (date.getMonth() + 1).toString()];\n        for (var id in values) {\n            values[id] = values[id].toString().replace(/^([0-9])$/, '0$1');\n        }\n        return (\n            <React.Fragment>\n                <div className=\"bg-white row col-md-6 col-xs-6 col-xl-4 col-12 justify-content-center mx-auto my-5 py-2 rounded shadow\">\n                    <div className=\"auth__group field col-12 my-1\">\n                        <Img link={this.state.user.avatar} id=\"cartinka\" />\n                    </div>\n                    <div className=\"auth__group field col-12 my-1\">\n                        <label htmlFor='Input.FirstName' className=\"auth__label\">First Name</label>\n                        <input type='text' name=\"firstName\" value={this.state.user.firstName} className=\"auth__field\" required\n                            onChange={this.handleInputChange} />\n                    </div>\n                    <div className=\"auth__group field col-12 my-1\">\n                        <label htmlFor='Input.SecondName' className=\"auth__label\">Second Name</label>\n                        <input type='text' name=\"secondName\" value={this.state.user.secondName} className=\"auth__field\" required\n                            onChange={this.handleInputChange} />\n                    </div>\n                    <div className=\"auth__group field col-12 my-1\">\n                        <label htmlFor='Input.Country' className=\"auth__label\">Country</label>\n                        <input type='text' name=\"country\" value={this.state.user.country} className=\"auth__field\" required\n                            onChange={this.handleInputChange} />\n                    </div>\n                    <div className=\"auth__group field col-12 my-1\">\n                        <label htmlFor='Input.City' className=\"auth__label\">City</label>\n                        <input type='text' name=\"city\" value={this.state.user.city} className=\"auth__field\" required\n                            onChange={this.handleInputChange} />\n                    </div>\n                    <div className=\"auth__group field col-12 my-1\">\n                        <label htmlFor='Input.FamilyStatus' className=\"auth__label\">Family Status</label>\n                        <input type='text' name=\"familyStatus\" value={this.state.user.familyStatus} className=\"auth__field\" required\n                            onChange={this.handleInputChange} />\n                    </div>\n                    <div className=\"auth__group field col-12 my-1\">\n                        <label htmlFor='Input.Languages' className=\"auth__label\">Languages</label>\n                        <input type='text' name=\"languages\" value={this.state.user.languages} className=\"auth__field\" required\n                            onChange={this.handleInputChange} />\n                    </div>\n                    <FileInput id={\"edit\"} onImageChange={this.handleInputFileChange} />\n                    <div className=\"auth__group field col-12 my-1\">\n                        <label htmlFor='Input.DateOfBirth' className=\"auth__label\">Date Of Birth</label>\n                        <input type='date' name=\"dateOfBirth\"\n                            pattern=\"[0-9]{4}-[0-9]{2}-[0-9]{2}\"\n                            value={date.getFullYear() + '-' + values[1] + '-' + values[0]} className=\"auth__field\" required\n                            onChange={this.handleInputChange} />\n                    </div>\n                    {this.props.status}\n                    <div className=\"btn_send\" onClick={this.handleSubmit.bind(this)}>\n                        <span className=\"noselect\">Send</span>\n                        <div id=\"circle\"></div>\n                    </div>\n                    {this.state.isLoading}\n                </div>\n            </React.Fragment>\n        );\n    }\n};\n\nexport default connect(\n    (state: ApplicationState) => state.editProfile,\n    EditProfileStore.actionCreators\n)(EditProfile as any);","import * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Friend } from '../../store/Friends/FriendsStore';\nimport authService from '../api-authorization/AuthorizeService';\nimport './friends.scss'\ninterface IProps {\n    friend: Friend,\n    isFriend: boolean\n}\nclass PanelOfFriend extends React.PureComponent<IProps, { isFriend: boolean }> {\n    constructor(props: IProps) {\n        super(props);\n        this.state = {\n            isFriend: this.props.isFriend\n        }\n    }\n    public componentDidMount() {\n    }\n    public renderButton() {\n        if (this.state.isFriend) {\n            return (\n                <div className=\"btn_send_friend link\" onClick={this.addDeleteFriend.bind(this)}>\n                    <span className=\"noselect\">Unsubscribe</span>\n                    <div id=\"circle\"></div>\n                </div>\n            )\n        } else {\n            return (\n                <div className=\"btn_send_friend link\" onClick={this.addDeleteFriend.bind(this)}>\n                    <span className=\"noselect\">Subscribe</span>\n                    <div id=\"circle\"></div>\n                </div>\n            )\n        }\n    }\n    public async addDeleteFriend() {\n        const token = await authService.getAccessToken();\n        fetch(`api/friends/addDeleteFriend?friendId=${this.props.friend.id}`, {\n            method: 'POST',\n            headers: !token ? {} : {\n                'Content-Type': 'application/json; charset=utf-8',\n                'Authorization': `Bearer ${token}`\n            },\n        })\n            .then(response => {\n                if (!response.ok) {\n                } else {\n                    this.setState({ isFriend: !this.state.isFriend })\n                }\n            })\n    }\n    public render() {\n        return (\n            <React.Fragment>\n                <div>\n                    <div className=\"post_content mx-sm-5\">\n                        <div className=\"post_header\">\n                            <img src={this.props.friend.avatar} alt=\"\" width=\"50\" height=\"50\" className=\"img-avatar\" />\n                            <div className=\"post_header_info\">\n                                <h5 className=\"post_author\">{`${this.props.friend.firstName} ${this.props.friend.secondName}`}</h5>\n                                <div className=\"post_date\">\n                                    {this.props.friend.dateOfBirth.toUTCString}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    {this.renderButton()}\n                    <div className=\"link\">\n                        <Link to={`/Profile/${this.props.friend.id}`}>\n                            <div className=\"btn_send_friend\">\n                                <span className=\"noselect\">Watch profile</span>\n                                <div id=\"circle\"></div>\n                            </div>\n                        </Link>\n                    </div>\n                    <div className=\"link mb-2\">\n                        <Link to={`/Dialog/${this.props.friend.id}`}>\n                            <div className=\"btn_send_friend\">\n                                <span className=\"noselect\">Chat now!</span>\n                                <div id=\"circle\"></div>\n                            </div>\n                        </Link>\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n};\n\n\nexport default PanelOfFriend","import * as React from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { connect } from 'react-redux';\nimport { ApplicationState } from '../../store';\nimport * as FriendsStore from '../../store/Friends/FriendsStore'\nimport PanelOfFriend from './PanelOfFriend';\n\ntype FriendsProps =\nFriendsStore.FriendsState &\n    typeof FriendsStore.actionCreators &\n    RouteComponentProps<{}>;\n\nclass Friends extends React.PureComponent<FriendsProps> {\n    public componentDidMount() {\n        this.ensureDataFetched()\n    }\n    private ensureDataFetched() {\n        this.props.requestFriends()\n        this.props.requestNotFriends()\n    }\n    public renderListOfFriends() {\n        if (this.props.listOfFriends == []) {\n            return\n        } else {\n            return (\n                this.props.listOfFriends.map(data => <PanelOfFriend key={data.id} friend={data} isFriend={true}/>)\n            )\n        }\n    }\n    public renderListOfNotFriends() {\n        if (this.props.listOfNotFriends == []) {\n            return\n        } else {\n            return (\n                this.props.listOfNotFriends.map(data => <PanelOfFriend key={data.id} friend={data} isFriend={false}/>)\n            )\n        }\n    }\n    public render() {\n        return (\n            <React.Fragment>\n                <div className=\"bg-white\">\n                    <div className=\"border-bottom border-dark\">\n                        {this.renderListOfFriends()}\n                    </div>\n                    {this.renderListOfNotFriends()}\n                </div>\n            </React.Fragment>\n        );\n    }\n};\n\nexport default connect(\n    (state: ApplicationState) => state.friends,\n    FriendsStore.actionCreators\n)(Friends as any);","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { ApplicationState } from '../../store';\nimport * as DialogStore from '../../store/Dialogs/DialogStore'\nimport { RouteComponentProps } from 'react-router';\nimport './dialog.scss'\ntype DialogProps =\n    DialogStore.DialogState\n    & typeof DialogStore.actionCreators\n    & RouteComponentProps<{ toUserId: string }>;\ninterface IState {\n    toUserId: string\n    message: string\n}\nexport class Dialog extends React.PureComponent<DialogProps, IState> {\n    constructor(props: DialogProps) {\n        super(props);\n        this.state = {\n            toUserId: '',\n            message: ''\n        };\n        this.handleInputChange = this.handleInputChange.bind(this)\n    }\n    componentDidMount = async () => {\n        this.setState({ toUserId: this.props.match.params.toUserId })\n        this.props.requestDialog(this.props.match.params.toUserId)\n    }\n    handleInputChange(event: React.ChangeEvent<HTMLTextAreaElement>) {\n        this.setState({ message: event.target.value });\n    }\n    sendMessage(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\n        this.props.sendMessage(this.state.toUserId, this.state.message)\n        this.setState({ message: '' });\n    }\n    componentDidUpdate() {\n        window.scrollTo(0, document.querySelector(\"#dialog\")!.scrollHeight)\n    }\n    render() {\n        return (\n            <div onLoad={() => window.scrollTo(0, document.querySelector(\"#dialog\")!.scrollHeight)} >\n                <div id=\"dialog\">\n                    {this.props.dialog.map(data => {\n                        let postDate = new Date(data.createDate)\n                        let date: string\n                        if (postDate.toLocaleDateString() == new Date().toLocaleDateString()) {\n                            date = postDate.toLocaleTimeString()\n                        } else {\n                            date = `${postDate.toLocaleDateString()} ${postDate.toLocaleTimeString()}`\n                        }\n                        let bg = ''\n                        if (data.isViewed == false) {\n                            bg = 'bg-secondary'\n                            if (data.withWhomId != this.props.withWhomId && data.withWhomId != undefined) this.props.recieveMessage(data)\n                        }\n                        return (\n                            <div key={data.id} id={data.id} className={`dialog_content_message mx-auto ${bg}`} onLoad={() => setTimeout(() => {\n                                if (document.getElementById(data.id) != null) document.getElementById(data.id)!.className = \"dialog_content_message mx-auto\"\n                            }, 5000)}>\n                                <div className=\"dialog_header\">\n                                    <img src={data.avatar} alt=\"\" width=\"50\" height=\"50\" className=\"img-avatar\" />\n                                    <div className=\"dialog_header_info\">\n                                        <h5 className=\"dialog_author\">{data.firstUserId}\n                                            <div className=\"dialog_date\">\n                                                {date}\n                                            </div>\n                                        </h5>\n                                        <div className=\"message_text \">\n                                            {data.message}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        )\n                    })}\n                </div>\n                <div className=\"fixed-bottom form__group_post_message field rounded shadow bg-white px-2 row col-xl-5 col-lg-8 col-md-10 col-12 mx-auto mb-xl-5\">\n                    <div className=\"col-10 col-sm-9 col-md-9 pl-4\">\n                        <label className=\"form__label_post_message\">Send message</label>\n                        <textarea className=\"form__field_post_message\" placeholder=\"Name\" name=\"name\" required\n                            onChange={this.handleInputChange} value={this.state.message} />\n                    </div>\n                    <div className=\"col-1 my-auto\">\n                        <div className=\"btn_send_post\" onClick={this.sendMessage.bind(this)}>\n                            <span className=\"noselect\">Send</span>\n                            <div id=\"circle\"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    (state: ApplicationState) => state.dialog,\n    DialogStore.actionCreators\n)(Dialog as any);","import * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport { User } from '../../store/Profile/ProfileStore';\nimport authService from '../api-authorization/AuthorizeService';\nimport './dialog.scss'\ninterface IProps {\n\n}\ninterface IState {\n    dialogs: UserDialog[]\n}\ninterface UserDialog extends User {\n    message: string\n    createDate: Date\n    count: number\n}\nexport class Dialogs extends React.PureComponent<IProps, IState> {\n    constructor(props: IProps) {\n        super(props);\n        this.state = {\n            dialogs: []\n        }\n    }\n    componentDidMount = async () => {\n        const token = await authService.getAccessToken();\n        fetch(`api/getDialogs`, {\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => {\n                return response.ok ? response.json() as Promise<UserDialog[]> : []\n            })\n            .then(data => {\n                this.setState({ dialogs: data })\n            })\n    }\n    renderDialogs() {\n        if (this.state.dialogs != null)\n            return (\n                this.state.dialogs.map((data: UserDialog) => {\n                    let postDate = new Date(data.createDate)\n                    let date: string\n                    if (postDate.toLocaleDateString() == new Date().toLocaleDateString()) {\n                        date = postDate.toLocaleTimeString()\n                    } else {\n                        date = `${postDate.toLocaleDateString()} ${postDate.toLocaleTimeString()}`\n                    }\n                    let count: string | number = data.count != 0 ? data.count : ''\n                    return (\n                        <div key={data.id} className=\"dialog_content mx-auto\">\n                            <Link to={`/Dialog/${data.id}`}>\n                                <div className=\"dialog_header\">\n                                    <img src={data.avatar} alt=\"\" width=\"50\" height=\"50\" className=\"img-avatar\" />\n                                    <div className=\"dialog_header_info\">\n                                        <h5 className=\"dialog_author\">{`${data.firstName} ${data.secondName}`}\n                                            <div className=\"dialog_date\">\n                                                {date}\n                                            </div> </h5>\n                                        <div id={data.id} className=\"message\">\n                                            <span className=\"badge badge-pill badge-warning\">{count}</span>\n                                            {' '}{data.message}\n                                        </div>\n                                    </div>\n                                </div>\n                            </Link>\n                        </div>\n                    )\n                })\n            )\n    }\n    render() {\n        return (\n            <div className=\"mt-2 \">\n                {this.renderDialogs()}\n            </div>\n        )\n    }\n}","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\nimport { ApplicationState } from '../../store';\nimport * as GroupStore from '../../store/Groups/GroupStore'\nimport { Group } from '../../store/Groups/GroupStore';\nimport { FileInput } from '../Profile/FileInput';\nimport '../api-auth/form.scss'\nimport { Img } from '../Images/Image';\n\ntype GroupeProps =\n    GroupStore.GroupState &\n    typeof GroupStore.actionCreators &\n    RouteComponentProps<{ id: string }>;\n\ninterface IState {\n    group: Group\n}\n\nclass CreateGroupe extends React.PureComponent<GroupeProps, IState> {\n    constructor(props: GroupeProps) {\n        super(props)\n        this.state = {\n            group: this.props.group\n        };\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.handleInputFileChange = this.handleInputFileChange.bind(this);\n    }\n    componentDidMount() {\n        if (this.props.match.params.id != null) this.props.getGroup(this.props.match.params.id)\n    }\n    handleInputFileChange(file: string) {\n        this.setState(({ group }) => ({\n            group: {\n                ...group,\n                avatarLink: file\n            }\n        }))\n    }\n    handleInputChange(event: React.ChangeEvent<HTMLInputElement>) {\n        const target = event.target;\n        const value: string = target.value;\n        let name: string = target.name;\n        this.setState(({ group }) => ({\n            group: {\n                ...group,\n                [name]: value\n            }\n        }))\n    }\n    handleSubmit = async (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n        const group = {\n            avatarLink: this.state.group.avatarLink,\n            name: this.state.group.name,\n            description: this.state.group.description\n        }\n        if (window.location.pathname.includes('CreateGroup')) {\n            this.props.request(group, 'createGroup')\n            window.location.replace('ListOfGroups');\n        } else {\n            const editGroup = {\n                ...group,\n                id: this.props.group.id\n            }\n            this.props.request(editGroup, 'editMainInfoGroup')\n        }\n    }\n    renderForm() {\n        return (\n            <div className=\"bg-white row col-md-6 col-xs-6 col-xl-4 col-12 justify-content-center mx-auto my-5 py-2 rounded shadow\">\n                <div>\n                    <Img link={this.state.group.avatarLink} id=\"asd\"/>\n                </div>\n                <div className=\"auth__group field col-12 my-1\">\n                    <label className=\"auth__label\">Name</label>\n                    <input type='text' name=\"name\" value={this.state.group.name} className=\"auth__field\" required\n                        onChange={this.handleInputChange} />\n                </div>\n                <div className=\"auth__group field col-12 my-1\">\n                    <label className=\"auth__label\">Description</label>\n                    <input type='text' name=\"description\" value={this.state.group.description} className=\"auth__field\" required\n                        onChange={this.handleInputChange} />\n                </div>\n                <div className=\"col-12\">\n                    <FileInput id={\"group\"} onImageChange={this.handleInputFileChange} />\n                </div>\n                <div className=\"btn_send\" onClick={this.handleSubmit.bind(this)}>\n                    <span className=\"noselect\">Create</span>\n                    <div id=\"circle\"></div>\n                </div>\n            </div>\n        )\n    }\n    render() {\n        return (\n            <div>\n                {this.renderForm()}\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    (state: ApplicationState) => state.group,\n    GroupStore.actionCreators\n)(CreateGroupe as any);","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { ApplicationState } from '../../store';\nimport * as GroupStore from '../../store/Groups/GroupStore'\n\ntype GroupeProps =\n    GroupStore.GroupState &\n    typeof GroupStore.actionCreators &\n    RouteComponentProps<{}>;\n\nclass ListOfSubscribers extends React.PureComponent<GroupeProps, {}> {\n    constructor(props: GroupeProps) {\n        super(props)\n    }\n    componentDidMount() {\n        this.props.getListOfSubscribers(this.props.group.id)\n    }\n    renderAdminList() {\n        return (\n            this.props.admins.map((data) => {\n                let name = data.firstName.length == 0 ? 'Name' : data.firstName\n                return (\n                    <div className=\"people_cell\" key={data.id}>\n                        <Link to={`/Profile/${data.id}`} >\n                            <img src={data.avatar} height=\"50\" width=\"50\" className=\"img-avatar\" alt=\"\" />\n                            <div className=\"people_cell_name\">{name}</div>\n                        </Link>\n                        {this.renderMakeAdminBtn('Unadmin', this.props.group.id, data.id)}\n                    </div>\n                )\n            })\n        )\n    }\n    renderUserList() {\n        return (\n            this.props.users.map((data) => {\n                let name = data.firstName.length == 0 ? 'Name' : data.firstName\n                return (\n                    <div className=\"people_cell\" key={data.id}>\n                        <Link to={`/Profile/${data.id}`} >\n                            <img src={data.avatar} height=\"50\" width=\"50\" className=\"img-avatar\" alt=\"\" />\n                            <div className=\"people_cell_name\">{name}</div>\n                        </Link>\n                        {this.renderMakeAdminBtn('Admin', this.props.group.id, data.id)}\n                    </div>\n                )\n            })\n        )\n    }\n    renderMakeAdminBtn(text: string, groupId: string, userId: string) {\n        if (this.props.isAuthor) {\n            return (\n                <div className=\"btn btn-primary btn-sm\" onClick={() => {\n                    this.props.request({\n                        groupId: groupId, userId: userId\n                    }, 'ChangeGroupAdmin')\n                    this.render()\n                }}>\n                    {text}\n                </div>\n            )\n        }\n    }\n    render() {\n        return (\n            <div>\n                <div className=\"row justify-content-center\">\n                    <div className=\"rounded shadow bg-white p-2 mt-3 subs col-12 col-lg-8 col-xl-8 px-1\" >\n                        <h5>Admins:</h5>\n                        {this.renderAdminList()}\n                    </div>\n                </div>\n                <div className=\"row justify-content-center\">\n                    <div className=\"rounded shadow bg-white p-2 mt-3 subs col-12 col-lg-8 col-xl-8 px-1 mb-3\" >\n                        <h5>Subscribers:</h5>\n                        {this.renderUserList()}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    (state: ApplicationState) => state.group,\n    GroupStore.actionCreators\n)(ListOfSubscribers as any);","import * as React from 'react';\nimport authService from '../api-authorization/AuthorizeService';\n\ninterface IProps {\n    groupId: string\n}\ninterface IState {\n    subscribed: boolean\n}\n\nexport class Subscribe extends React.PureComponent<IProps, IState> {\n    constructor(props: IProps) {\n        super(props);\n        this.state = {\n            subscribed: false\n        }\n    }\n    async componentDidMount() {\n        const token = await authService.getAccessToken();\n        fetch(`api/isSubscribed?groupId=${this.props.groupId}`, {\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => {\n                if (response.ok) {\n                    return response.json()\n                }\n            })\n            .then((data) => {\n                this.setState((state) => ({\n                    ...state,\n                    subscribed: data\n                }))\n            })\n    }\n    async subscribe() {\n        const token = await authService.getAccessToken();\n        fetch(`api/subscribe?groupId=${this.props.groupId}`, {\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => {\n                if (response.ok) {\n                    this.setState((state) => ({\n                        ...state,\n                        subscribed: !state.subscribed\n                    }))\n                }\n            })\n    }\n    render() {\n        return (\n            <div>\n                {this.state.subscribed\n                    ? <div className=\"btn_send_friend\" onClick={this.subscribe.bind(this)}>\n                        <span className=\"noselect\">Отписаться</span>\n                        <div id=\"circle\"></div>\n                    </div>\n                    : <div className=\"btn_send_friend\" onClick={this.subscribe.bind(this)}>\n                        <span className=\"noselect\">Подписаться</span>\n                        <div id=\"circle\"></div>\n                    </div>\n                }\n            </div>\n        )\n    }\n}","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { ApplicationState } from '../../store';\nimport * as GroupStore from '../../store/Groups/GroupStore'\nimport CreatePost from '../Posts/CreatePost';\nimport ListOfPosts from '../Posts/ListOfPosts';\nimport ListOfSubscribers from './ListOfSubscribers';\nimport { Subscribe } from './Subscribe';\nimport './group.scss'\n\ntype GroupeProps =\n    GroupStore.GroupState &\n    typeof GroupStore.actionCreators &\n    RouteComponentProps<{ id: string }>;\n\ninterface IState {\n\n}\n\nclass GetGroup extends React.PureComponent<GroupeProps, IState> {\n    constructor(props: GroupeProps) {\n        super(props)\n    }\n    componentDidMount() {\n        this.props.getGroup(this.props.match.params.id)\n    }\n    renderGroup() {\n        if (this.props.group.id != '') {\n            return (\n                <div>\n                    <div className=\"row justify-content-center\">\n                        <div key={this.props.group.id} className=\"bg-white col-12 col-lg-8 col-xl-8 px-1 border border-top border-bottom\">\n                            <div className=\"group_content\">\n                                <div className=\"group_header\">\n                                    <img src={this.props.group.avatarLink} alt=\"\" width=\"50\" height=\"50\" className=\"img-avatar\" />\n                                    <div className=\"group_header_info\">\n                                        <h5 className=\"group_author\">{this.props.group.name}\n                                            <div className=\"group_date absolute\">\n                                                <Subscribe groupId={this.props.group.id} />\n                                                {this.renderAuthView()}\n                                            </div>\n                                        </h5>\n                                        <p>{this.props.group.description}</p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <ListOfSubscribers />\n                    { this.renderAdminView()}\n                    <ListOfPosts />\n                </div >\n            )\n        }\n    }\n    renderAuthView() {\n        if (this.props.isAuthor)\n            return (\n                <div>\n                    <Link to={`/EditGroup/${this.props.group.id}`}>\n                        <div className=\"d-flex\">\n                            <div className=\"btn_send_friend\">\n                                <span className=\"noselect\">Edit group</span>\n                                <div id=\"circle\"></div>\n                            </div>\n                        </div>\n                    </Link>\n                </div>\n            )\n    }\n    renderAdminView() {\n        if (this.props.isAdmin)\n            return (\n                <div className=\"row justify-content-center\">\n                    <div className=\"col-12 col-lg-8 col-xl-8 px-1\">\n                        <CreatePost />\n                    </div>\n                </div>\n            )\n    }\n    render() {\n        return (\n            <div>\n                {this.renderGroup()}\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    (state: ApplicationState) => state.group,\n    GroupStore.actionCreators\n)(GetGroup as any);","import * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport authService from '../api-authorization/AuthorizeService';\nimport { Subscribe } from './Subscribe';\n\ninterface IState {\n    subGroups: any,\n    notSubGroups: any\n}\n\nexport class ListOfGroups extends React.PureComponent<{}, IState> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            subGroups: undefined,\n            notSubGroups: undefined\n        }\n    }\n    componentDidMount = async () => {\n        const token = await authService.getAccessToken();\n        fetch(`api/getListOfSubGroups`, {\n            headers: !token ? {} : { 'Authorization': `Bearer ${token}` }\n        })\n            .then(response => {\n                return response.ok ? response.json() as Promise<any> : { subGroups: [], notSubGroups: [] }\n            })\n            .then(data => {\n                this.setState({ subGroups: data.listOfSubGroups, notSubGroups: data.listOfNotSubGroups })\n            })\n    }\n    renderGroups(sub: boolean) {\n        if (this.state.subGroups != null || this.state.notSubGroups != null) {\n            let a: any\n            sub == true ? a = this.state.subGroups : a = this.state.notSubGroups\n            return (\n                a.map((data: any) => {\n                    return (\n                        <div key={data.id} className=\"bg-white col-12 border border-top border-bottom\">\n                            <div className=\"post_content mx-sm-5\">\n                                <div className=\"post_header\">\n                                    <img src={data.avatarLink} alt=\"\" width=\"50\" height=\"50\" className=\"img-avatar\" />\n                                    <div className=\"post_header_info\">\n                                        <h5 className=\"post_author\">{data.name}</h5>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"mt-3 ml-5\">\n                                <Subscribe groupId={data.id} />\n                            </div>\n                            <Link to={`/Group/${data.id}`}>\n                                <div className=\"btn_send_friend ml-5\">\n                                    <span className=\"noselect\">Go to group</span>\n                                    <div id=\"circle\"></div>\n                                </div>\n                            </Link>\n                        </div>\n                    )\n                })\n            )\n        }\n    }\n    render() {\n        return (\n            <div className=\"row justify-content-center\">\n                <div className=\"border-top border-bottom border-black col-8\">\n                    {this.renderGroups(true)}\n                </div>\n                <div className=\"border-top border-bottom  border-black col-8\">\n                    {this.renderGroups(false)}\n                </div>\n            </div>\n        )\n    }\n}","import 'bootstrap/dist/css/bootstrap.css';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { createBrowserHistory } from 'history';\nimport configureStore from './store/configureStore';\nimport App from './App';\nimport authService from './components/api-authorization/AuthorizeService';\nimport { signalRRegisterCommands } from './store/signalr/signal';\n\nconst baseUrl = document.getElementsByTagName('base')[0].getAttribute('href') as string;\nconst history = createBrowserHistory({ basename: baseUrl });\n\nasync function auth() {\n    const isAuthenticated = await authService.isAuthenticated()\n    const user = await authService.getUser()\n    if (isAuthenticated.valueOf()) signalRRegisterCommands(store)\n    if (isAuthenticated.valueOf()) {\n        store.dispatch({ type: 'GET_NUMBER_OF_UNREAD_DIALOGS', id: user.sub })\n    }\n}\nconst store = configureStore(history);\nauth()\n\nReactDOM.render(\n    <Provider store={store}>\n        <ConnectedRouter history={history}>\n            <App />\n        </ConnectedRouter>\n    </Provider>,\n    document.getElementById('root'))\n","import { applyMiddleware, combineReducers, compose, createStore } from 'redux';\nimport thunk from 'redux-thunk';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport { History } from 'history';\nimport { ApplicationState, reducers } from './';\nimport { ping } from './signalr/signal';\n\nexport default function configureStore(history: History, initialState?: ApplicationState) {\n    const middleware = [\n        thunk,\n        routerMiddleware(history),\n        ping\n    ];\n\n    const rootReducer = combineReducers({\n        ...reducers,\n        router: connectRouter(history)\n    });\n\n    const enhancers = [];\n    const windowIfDefined = typeof window === 'undefined' ? null : window as any;\n    if (windowIfDefined && windowIfDefined.__REDUX_DEVTOOLS_EXTENSION__) {\n        enhancers.push(windowIfDefined.__REDUX_DEVTOOLS_EXTENSION__());\n    }\n    return createStore(\n        rootReducer,\n        initialState,\n        compose(applyMiddleware(...middleware), ...enhancers)\n    );\n}\n","import * as React from 'react';\nimport { Route } from 'react-router';\nimport Layout from './components/Layout';\nimport Home from './components/Home';\nimport './custom.scss'\nimport AuthorizeRoute from './components/api-authorization/AuthorizeRoute';\nimport { ApplicationPaths } from './components/api-authorization/ApiAuthorizationConstants';\nimport ApiAuthorizationRoutes from './components/api-authorization/ApiAuthorizationRoutes';\nimport LoginForm from './components/api-auth/LoginForm';\nimport { NotFound } from './components/NotFound';\nimport RegisterForm from './components/api-auth/RegisterForm';\nimport { BadConfirmEmail, ConfirmEmailSuccess } from './components/api-auth/ConfirmEmail';\nimport Profile from './components/Profile/Profile';\nimport EditProfile from './components/Profile/EditProfile';\nimport Friends from './components/Friends/Friends';\nimport Dialog from './components/Chat/Dialog';\nimport { Dialogs } from './components/Chat/Dialogs';\nimport CreateGroup from './components/Groups/CreateGroup';\nimport GetGroup from './components/Groups/GetGroup';\nimport { ListOfGroups } from './components/Groups/ListOfGroups';\nimport { Img } from './components/Images/Image';\n\nexport default () => (\n    <Layout>\n        <Route exact path='/' component={Home} />\n        <Route path='/MyLogin' component={LoginForm} />\n        <Route path='/MyRegister' component={RegisterForm} />\n        <Route path={ApplicationPaths.ApiAuthorizationPrefix} component={ApiAuthorizationRoutes} />\n        <Route path='/notfound' component={NotFound} />\n        <Route path='/BadConfirmEmail' component={BadConfirmEmail} />\n        <Route path='/ConfirmEmailSuccess' component={ConfirmEmailSuccess} />\n        <Route path='/Dialog/:toUserId' component={Dialog} />\n        <Route path='/Profile/:userId' component={Profile} />\n        <Route path='/Dialogs' component={Dialogs} />\n        <AuthorizeRoute path='/EditProfile' component={EditProfile} />\n        <Route path='/Friends' component={Friends} />\n        <AuthorizeRoute path='/CreateGroup' component={CreateGroup} />\n        <AuthorizeRoute path='/EditGroup/:id' component={CreateGroup} />\n        <Route path='/Group/:id' component={GetGroup} />\n        <Route path='/ListOfGroups' component={ListOfGroups} />\n        <Route path='/Image/:id/:link' component={Img} />\n    </Layout>\n);\n"],"sourceRoot":""}